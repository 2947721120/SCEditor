(function(b){b.sceditor=function(c,d){var a=this,f=b(c),e=null,i=null,h=null,g=null,k=null,j=null,n=!1,q=[],m=null,r=null,J=[],o,p,z,A,B,v,C,D,E,F,G,w,x,H,l,y,t,u,I,s;a.commands=b.sceditor.commands;D=function(){var d=b('<div contenteditable="true">')[0].contentEditable,d="undefined"!==typeof d&&"inherit"!==d;k=b("<textarea></textarea>").hide();h=b('<iframe frameborder="0"></iframe>');"https:"===window.location.protocol&&h.attr("src","javascript:false");e.append(h).append(k);g=h[0];u(f.width());t(f.height());
d||(l().designMode="On");l().open();l().write('<html><head><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /><meta http-equiv="Content-Type" content="text/html;charset='+a.options.charset+'" /><link rel="stylesheet" type="text/css" href="'+a.options.style+'" /></head><body contenteditable="true"></body></html>');l().close();d||(l().designMode="On");b(l()).find("body").keypress(v);b(l()).keypress(v);b(l()).mousedown(C);b(l()).bind("beforedeactivate keypress",B);b(l()).focus(function(){m=
null})};E=function(){var d=function(d){A(b(this),a.commands[b(this).data("sceditor-command")]);d.preventDefault()};i=b('<div class="sceditor-toolbar" />');var c=a.options.toolbar.split("|"),f,n,j,h;for(h=0;h<c.length;h++){f=b('<div class="sceditor-group" />');n=c[h].split(",");for(var g=0;g<n.length;g++)a.commands.hasOwnProperty(n[g])&&(j=a.commands[n[g]].tooltip?a._(a.commands[n[g]].tooltip):n[g],j=b('<a class="sceditor-button sceditor-button-'+n[g]+' " unselectable="on"><div unselectable="on">'+
j+"</div></a>"),a.commands[n[g]].hasOwnProperty("tooltip")&&j.attr("title",a._(a.commands[n[g]].tooltip)),a.commands[n[g]].exec?j.data("sceditor-wysiwygmode",!0):j.addClass("disabled"),a.commands[n[g]].txtExec&&j.data("sceditor-txtmode",!0),j.data("sceditor-command",n[g]),j.click(d),f.append(j));i.append(f)}null===a.options.toolbarContainer?e.append(i):b(a.options.toolbarContainer).append(i)};F=function(){b.each(a.commands,function(a,b){"undefined"!==typeof b.keyPress&&q.push(b.keyPress)})};u=function(a){e.width(a);
h.width(a);h.width(a+(a-h.outerWidth(!0)));k.width(a);k.width(a+(a-k.outerWidth(!0)))};t=function(b){e.height(b);b-=null===a.options.toolbarContainer?i.outerHeight():0;h.height(b);h.height(b+(b-h.outerHeight(!0)));k.height(b);k.height(b+(b-k.outerHeight(!0)))};G=function(){var d=b('<div class="sceditor-grip" />'),c=b('<div class="sceditor-resize-cover" />'),f=0,n=0,j=0,h=0,g=e.width(),i=e.height(),m=!1,q,p,k,o,l;q=null==a.options.resizeMinHeight?i/2:a.options.resizeMinHeight;p=null==a.options.resizeMaxHeight?
2*i:a.options.resizeMaxHeight;k=null==a.options.resizeMinWidth?g/2:a.options.resizeMinWidth;o=null==a.options.resizeMaxWidth?2*g:a.options.resizeMaxWidth;l=function(a){var b=h+(a.pageY-n),d=j+(a.pageX-f);d>=k&&(0>o||d<=o)&&u(d);b>=q&&(0>p||b<=p)&&t(b);a.preventDefault()};e.append(d);e.append(c.hide());d.mousedown(function(a){f=a.pageX;n=a.pageY;j=e.width();h=e.height();m=!0;c.show();b(document).bind("mousemove",l);a.preventDefault()});b(document).mouseup(function(a){m&&(m=!1,c.hide(),b(document).unbind("mousemove",
l),a.preventDefault())})};x=function(d){a.updateTextareaValue();b(this).removeAttr("novalidate");this.checkValidity&&!this.checkValidity()&&d.preventDefault();b(this).attr("novalidate","novalidate")};a.destory=function(){b(document).unbind("click",w);f.removeAttr("novalidate").unbind("submit",x);b(window).unbind("resize",y);e.remove();e=null;f.removeData("sceditor").show()};H=function(){var d=b.extend({},a.options.emoticons.more,a.options.emoticons.dropdown,a.options.emoticons.hidden);b.each(d,function(a,
b){var d=document.createElement("img");d.src=b;J.push(d)})};a.createDropDown=function(d,c,e,f){a.closeDropDown();!1!==f&&(e=b(e),e.find(":not(input,textarea)").filter(function(){return 1===this.nodeType}).attr("unselectable","on"));j=b('<div class="sceditor-dropdown sceditor-'+c+'" />').css({top:d.offset().top,left:d.offset().left}).append(e);j.appendTo(b("body"));n=!0;j.click(function(a){a.stopPropagation()})};w=function(b){!n&&3!==b.which&&a.closeDropDown();n=!1};a.closeDropDown=function(b){null!==
j&&(j.remove(),j=null);!0===b&&a.focus()};l=function(){return g.contentDocument?g.contentDocument:g.contentWindow&&g.contentWindow.document?g.contentWindow.document:g.document?g.document:null};a.wysiwygEditorInsertHtml=function(d,c,e){a.focus();if(e||!(b(o()).is("code")||0!==b(o()).parents("code").length)){"undefined"!==typeof c&&null!==c&&(d=d+a.getWysiwygSelectedHtml()+c);if(l().getSelection){c=p();e=l().createElement("div");e.innerHTML=d;e=e.children[0];c.deleteContents();c.insertNode(e);c=c.cloneRange();
if(e.parentNode!==c.startContainer||!b.browser.opera)c.setStartAfter(e);else return;g.contentWindow.getSelection().removeAllRanges();g.contentWindow.getSelection().addRange(c)}else l().selection&&l().selection.createRange?l().selection.createRange().pasteHTML(d):a.execCommand("insertHtml",d);m=null}};a.wysiwygEditorInsertText=function(b){b=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\r\n|\r/g,"\n").replace(/\n/g,"<br />");a.wysiwygEditorInsertHtml("<span>"+
b+"</span>")};p=function(){var a;g.contentWindow&&g.contentWindow.getSelection?a=g.contentWindow.getSelection():l().selection&&(a=l().selection);a.getRangeAt&&0>=a.rangeCount&&a.addRange(l().createRange());return a.getRangeAt?a.getRangeAt(0):a.createRange?a.createRange():null};a.getWysiwygSelectedHtml=function(){var a=p();if(null===a)return"";if(document.selection&&document.selection.createRange){if(""===a.text)return"";if("undefined"!==typeof a.htmlText)return a.htmlText}if(window.XMLSerializer){var d=
"";b(a.cloneContents().childNodes).each(function(){d+=(new XMLSerializer).serializeToString(this)});return d}};o=function(){var a=p();if(null===a)return null;if(window.getSelection&&"undefined"!==typeof a.commonAncestorContainer)return a.commonAncestorContainer;if(document.selection&&document.selection.createRange)return a.parentElement()};a.getWysiwygEditorValue=function(d){var c=h.contents().find("body");b.sceditor.dom.fixNesting(c.get(0));var e=c.html();!1!==d&&a.options.getHtmlHandler&&(e=a.options.getHtmlHandler(e,
c));return e};a.getTextareaValue=function(b){var d=k.val();!1!==b&&a.options.getTextHandler&&(d=a.options.getTextHandler(d));return d};a.setWysiwygEditorValue=function(a){l().body.innerHTML=z(a)};a.setTextareaValue=function(a){k.val(a)};a.updateTextareaValue=function(){s()?f.val(a.getTextareaValue(!1)):f.val(a.getWysiwygEditorValue())};z=function(d){var c=b.extend({},a.options.emoticons.more,a.options.emoticons.dropdown,a.options.emoticons.hidden);b.each(c,function(b,c){var e=a.regexEscape(b)+"(?=([^\\<\\>]*?<(?!/code)|[^\\<\\>]*?$))",
f="";a.options.emoticonsCompat&&(e="((>|^|\\s){1})"+e+"(?=(\\s|$|<){1})",f="$1");d=d.replace(RegExp(e,"gm"),f+'<img src="'+c+'" data-sceditor-emoticon="'+b+'" alt="'+b+'" />')});return d};a.regexEscape=function(a){return a.replace(/[\$\?\[\]\.\*\(\)\|]/g,"\\$&").replace("<","&lt;").replace(">","&gt;")};s=function(){return k.is(":visible")};a.toggleTextMode=function(){s()?a.setWysiwygEditorValue(a.getTextareaValue()):a.setTextareaValue(a.getWysiwygEditorValue());i.find(".sceditor-button").removeClass("disabled");
m=null;k.toggle();h.toggle();i.find(".sceditor-button").each(function(){var a=b(this);s()&&!a.data("sceditor-txtmode")?a.addClass("disabled"):!s()&&!a.data("sceditor-wysiwygmode")&&a.addClass("disabled")})};A=function(d,c){s()?c.hasOwnProperty("txtExec")&&c.txtExec.call(a,d):c.hasOwnProperty("exec")&&(b.isFunction(c.exec)?c.exec.call(a,d):a.execCommand(c.exec,c.hasOwnProperty("execParam")?c.execParam:null))};a.focus=function(){g.contentWindow.focus();null!==m&&(window.document.createRange?window.getSelection().addRange(m):
window.document.selection&&m.select(),m=null)};B=function(){b.browser.msie&&(m=p())};a.execCommand=function(d,c){var e=!1;a.focus();if(!(b(o()).is("code")||0!==b(o()).parents("code").length)){if(l())try{e=l().execCommand(d,!1,c)}catch(f){}!e&&"undefined"!==typeof a.commands[d]&&"undefined"!==typeof a.commands[d].errorMessage&&alert(a._(a.commands[d].errorMessage))}};v=function(d){a.closeDropDown();var c=o(),c=b(c);if(13===d.which&&(c.is("code, blockquote")||0!==c.parents("code, blockquote").length))return a.wysiwygEditorInsertHtml("<br />",
null,!0),!1;var e=l();b.sceditor.dom.rTraverse(e.body,function(a){if(3===a.nodeType&&""!==a.nodeValue||"br"===a.nodeName.toLowerCase())return 0<b(a).parents("code, blockquote").length&&b(e.body).append(e.createElement("br")),!1},!0);if(!(c.is("code")||0!==c.parents("code").length))for(c=q.length;c--;)q[c].call(a,d,g,k)};C=function(){a.closeDropDown();m=null};y=function(){null!==a.options.height&&-1<a.options.height.toString().indexOf("%")&&t(e.parent().height()*(parseFloat(a.options.height)/100));
null!==a.options.width&&-1<a.options.width.toString().indexOf("%")&&u(e.parent().width()*(parseFloat(a.options.width)/100))};a._=function(){var a=arguments;null!==r&&r[a[0]]&&(a[0]=r[a[0]]);return a[0].replace(/\{(\d+)\}/g,function(d,b){return"undefined"!==typeof a[b-0+1]?a[b-0+1]:"{"+b+"}"})};I=function(){if(b.sceditor.locale[a.options.locale])r=b.sceditor.locale[a.options.locale];else{var d=a.options.locale.split("-");b.sceditor.locale[d[0]]&&(r=b.sceditor.locale[d[0]])}null!==r&&r.dateFormat&&
(a.options.dateFormat=r.dateFormat)};(function(){f.data("sceditor",a);a.options=b.extend({},b.sceditor.defaultOptions,d);null!==a.options.locale&&"en"!==a.options.locale&&I();null!==a.options.height&&f.height(a.options.height);null!==a.options.width&&f.width(a.options.width);(null!==a.options.height&&-1<a.options.height.toString().indexOf("%")||null!==a.options.width&&-1<a.options.width.toString().indexOf("%"))&&b(window).resize(y);e=b('<div class="sceditor-container" />').width(f.outerWidth()).height(f.outerHeight());
f.after(e);E();D();F();a.options.resizeEnabled&&G();b(document).click(w);f.parents("form").attr("novalidate","novalidate").submit(x);var c=f.hide().val();a.options.getTextHandler&&(c=a.options.getTextHandler(c));a.setWysiwygEditorValue(c);-1!=a.options.toolbar.indexOf("emoticon")&&H()})()};b.sceditor.locale={};b.sceditor.commands={bold:{exec:"bold",tooltip:"Bold"},italic:{exec:"italic",tooltip:"Italic"},underline:{exec:"underline",tooltip:"Underline"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},
subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{exec:function(c){var d=this,a=d.options.fonts.split(","),f=b("<div />");clickFunc=function(a){d.execCommand("fontname",b(this).data("sceditor-font"));d.closeDropDown(!0);a.preventDefault()};for(var e=
0;e<a.length;e++)f.append(b('<a class="sceditor-font-option" href="#"><font face="'+a[e]+'">'+a[e]+"</font></a>").data("sceditor-font",a[e]).click(clickFunc));d.createDropDown(c,"font-picker",f)},tooltip:"Font Name"},size:{exec:function(c){for(var d=this,a=b("<div />"),f=function(a){d.execCommand("fontsize",b(this).data("sceditor-fontsize"));d.closeDropDown(!0);a.preventDefault()},e=1;7>=e;e++)a.append(b('<a class="sceditor-fontsize-option" href="#"><font size="'+e+'">'+e+"</font></a>").data("sceditor-fontsize",
e).click(f));d.createDropDown(c,"fontsize-picker",a)},tooltip:"Font Size"},color:{exec:function(c){for(var d=this,a={r:255,g:255,b:255},f=b("<div />"),e=this.options.colors?this.options.colors.split("|"):Array(21),i=[],h=0,g=0;g<e.length;++g){var k="undefined"!==typeof e[g]?e[g].split(","):Array(21);i[h++]='<div class="sceditor-color-column">';for(var j=0;j<k.length;++j){var n="undefined"!==typeof k[j]?k[j]:"#"+a.r.toString(16)+a.g.toString(16)+a.b.toString(16);i[h++]='<a href="#" class="sceditor-color-option" style="background-color: '+
n+'" data-color="'+n+'"></a>';a=0===j%5?{r:a.r,g:a.g-51,b:255}:{r:a.r,g:a.g,b:a.b-51}}i[h++]="</div>";a=0===g%5?{r:a.r-51,g:255,b:255}:{r:a.r,g:255,b:255}}f.append(i.join("")).find("a").click(function(a){d.execCommand("forecolor",b(this).attr("data-color"));d.closeDropDown(!0);a.preventDefault()});d.createDropDown(c,"color-picker",f)},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},
copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(c){var d=this;content=b(this._('<form><div><label for="txt">{0}</label> <textarea cols="20" rows="7" id="txt"></textarea></div></form>',this._("Paste your text inside the following box:"))).submit(function(){return!1});
content.append(b(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){d.wysiwygEditorInsertText(b(this).parent("form").find("#txt").val());d.closeDropDown(!0);a.preventDefault()}));d.createDropDown(c,"pastetext",content)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},table:{exec:function(c){var d=this,a=b(this._('<form><div><label for="rows">{0}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{1}</label><input type="text" id="cols" value="2" /></div></form>',
this._("Rows:"),this._("Cols:"))).submit(function(){return!1});a.append(b(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){var c=b(this).parent("form").find("#rows").val()-0,i=b(this).parent("form").find("#cols").val()-0,h="<table>";if(!(1>c||1>i)){for(var g=0;g<c;g++){for(var h=h+"<tr>",k=0;k<i;k++)h=b.browser.msie?h+"<td></td>":h+'<td><br class="sceditor-ignore" /></td>';h+="</tr>"}d.wysiwygEditorInsertHtml(h+"</table>");d.closeDropDown(!0);
a.preventDefault()}}));d.createDropDown(c,"inserttable",a)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{exec:function(c){var d=this,a=b(this._('<form><div><label for="link">{0}</label> <input type="text" id="image" value="http://" /></div><div><label for="width">{1}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{2}</label> <input type="text" id="height" size="2" /></div></form>',
this._("URL:"),this._("Width (optional):"),this._("Height (optional):"))).submit(function(){return!1});a.append(b(this._('<div><input type="button" class="button" value="Insert" /></div>',this._("Insert"))).click(function(a){var c=b(this).parent("form"),i=c.find("#image").val(),h="",g;if(g=c.find("#width").val())h+=' width="'+g+'"';if(c=c.find("#height").val())h+=' height="'+c+'"';i&&"http://"!==i&&d.wysiwygEditorInsertHtml("<img"+h+' src="'+i+'" />');d.closeDropDown(!0);a.preventDefault()}));d.createDropDown(c,
"insertimage",a)},tooltip:"Insert an image"},email:{exec:function(c){var d=this,a=b(this._('<form><div><label for="email">{0}</label> <input type="text" id="email" value="" /></div></form>',this._("E-mail:"))).submit(function(){return!1});a.append(b('<div><input type="button" class="button" value="Insert" /></div>').click(function(a){var c=b(this).parent("form").find("#email").val();c&&(d.focus(),d.getWysiwygSelectedHtml()?d.execCommand("createlink","mailto:"+c):d.wysiwygEditorInsertHtml('<a href="mailto:'+
c+'">'+c+"</a>"));d.closeDropDown(!0);a.preventDefault()}));d.createDropDown(c,"insertemail",a)},tooltip:"Insert an email"},link:{exec:function(c){var d=this,a=b(this._('<form><div><label for="link">{0}</label> <input type="text" id="link" value="http://" /></div><div><label for="des">{1}</label> <input type="text" id="des" value="" /></div></form>',this._("URL:"),this._("Description (optional):"))).submit(function(){return!1});a.append(b(this._('<div><input type="button" class="button" value="{0}" /></div>',
this._("Insert"))).click(function(a){var c=b(this).parent("form").find("#link").val(),i=b(this).parent("form").find("#des").val();""!==c&&"http://"!==c&&(d.focus(),!d.getWysiwygSelectedHtml()||i?(i||(i=c),d.wysiwygEditorInsertHtml('<a href="'+c+'">'+i+"</a>")):d.execCommand("createlink",c));d.closeDropDown(!0);a.preventDefault()}));d.createDropDown(c,"insertlink",a)},tooltip:"Insert a link"},unlink:{exec:"unlink",tooltip:"Unlink"},quote:{exec:function(c,d,a){var c="<blockquote>",b="</blockquote>";
d?(c=c+(a?"<cite>"+a+"</cite>":"")+d+b+"<br />",b=null):b="<br />"+b;this.wysiwygEditorInsertHtml(c,b)},tooltip:"Insert a Quote"},emoticon:{exec:function(c){var d,a=this,f=b("<div />"),e=b("<div />");d=function(c,d){e.append(b("<img />").attr({src:d,alt:c}).click(function(c){var d,e;a.options.emoticonsCompat&&(d="<span> ",e=" </span>");a.wysiwygEditorInsertHtml(d+'<img src="'+b(this).attr("src")+'" data-sceditor-emoticon="'+b(this).attr("alt")+'" />'+e);a.closeDropDown(!0);c.preventDefault()}));3<
e.children().length&&(f.append(e),e=b("<div />"))};b.each(a.options.emoticons.dropdown,d);0<e.children().length&&f.append(e);if("undefined"!==typeof a.options.emoticons.more){var i=b(this._('<a class="sceditor-more">{0}</a>',this._("More"))).click(function(){var h=b.extend({},a.options.emoticons.dropdown,a.options.emoticons.more);f=b("<div />");e=b("<div />");b.each(h,d);0<e.children().length&&f.append(e);a.createDropDown(c,"insertemoticon",f)});f.append(i)}a.createDropDown(c,"insertemoticon",f)},
keyPress:function(c,d){var a=null,f=-1,e=this;d.contentWindow&&d.contentWindow.getSelection&&(a=d.contentWindow.getSelection().getRangeAt(0));if(null!=a&&a.startContainer){e.allEmoticonCache||(e.allEmoticonCache=b.extend({},e.options.emoticons.more,e.options.emoticons.dropdown,e.options.emoticons.hidden));e.longestEmoticonCode||(e.longestEmoticonCode=0,b.each(e.allEmoticonCache,function(a){a.length>e.longestEmoticonCode&&(e.longestEmoticonCode=a.length)}),e.options.emoticonsCompat&&(e.longestEmoticonCode+=
1));var i=String.fromCharCode(c.which),h=e.options.emoticonsCompat?/\s/.test(i):!1,g=a.startContainer.textContent.substr(0,a.startOffset),k=a.startContainer.textContent.substr(a.startOffset,e.longestEmoticonCode),j=g+i+k;b.each(e.allEmoticonCache,function(b,g){if(-1<(f=j.indexOf(b,a.startOffset-b.length))){if(e.options.emoticonsCompat){var m=RegExp("(\\s{1})"+e.regexEscape(b)+"(?=\\s{1})","gm");if(h&&-1<(i+k).indexOf(b)||!m.test(j))return}a=a.cloneRange();a.setStart(a.startContainer,f);a.setEnd(a.startContainer,
f+b.length-(h?0:1));a.deleteContents();m=d.contentDocument.createElement("div");m.innerHTML='<img src="'+g+'" data-sceditor-emoticon="'+b+'" alt="'+b+'" />';m=m.children[0];a.insertNode(m);a=a.cloneRange();a.setStartAfter(m);d.contentWindow.getSelection().removeAllRanges();d.contentWindow.getSelection().addRange(a);h||(c.preventDefault(),c.stopPropagation());return!1}})}},tooltip:"Insert an emoticon"},youtube:{exec:function(c){var d=this,a=b(this._('<form><div><label for="link">{0}</label> <input type="text" id="link" value="http://" /></div></form>',
this._("Video URL:"))).submit(function(){return!1});a.append(b(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){var c=b(this).parent("form").find("#link").val();""!==c&&"http://"!==c&&(c=c.replace(/^[^v]+v.(.{11}).*/,"$1"),d.wysiwygEditorInsertHtml('<iframe width="560" height="315" src="http://www.youtube.com/embed/'+c+'?wmode=opaque" data-youtube-id="'+c+'" frameborder="0" allowfullscreen></iframe>'));d.closeDropDown(!0);a.preventDefault()}));
d.createDropDown(c,"insertlink",a)},tooltip:"Insert a YouTube video"},date:{exec:function(){var c=new Date,d=c.getYear(),a=c.getMonth()+1,c=c.getDate();2E3>d&&(d=1900+d);10>a&&(a="0"+a);10>c&&(c="0"+c);this.wysiwygEditorInsertHtml("<span>"+this.options.dateFormat.replace(/year/i,d).replace(/month/i,a).replace(/day/i,c)+"</span>")},tooltip:"Insert current date"},time:{exec:function(){var c=new Date,d=c.getHours(),a=c.getMinutes(),c=c.getSeconds();10>d&&(d="0"+d);10>a&&(a="0"+a);10>c&&(c="0"+c);this.wysiwygEditorInsertHtml("<span>"+
d+":"+a+":"+c+"</span>")},tooltip:"Insert current time"},print:{exec:"print",tooltip:"Print"},source:{exec:function(){this.toggleTextMode()},txtExec:function(){this.toggleTextMode()},tooltip:"View source"},ignore:{}};b.sceditor.dom={traverse:function(c,d,a,b,e){if(c)for(c=e?c.lastChild:c.firstChild;null!=c;){if(!a&&!1===d(c)||!b&&!1===this.traverse(c,d,a,b,e)||a&&!1===d(c))return!1;c=e?c.previousSibling:c.nextSibling}},rTraverse:function(c,b,a,f){this.traverse(c,b,a,f,!0)},isInline:function(c,b){var a=
(window.getComputedStyle?window.getComputedStyle(c):c.currentStyle).display;return b?"block"!==a:"inline"===a},copyCSS:function(c,d){for(var a="font-size,color,font-family,font-wieght,font-style,text-decoration".split(","),f=a.length,e=b(c),i=b(d);f--;)i.css(a[f],e.css(a[f]))},fixNesting:function(c){var b=this;b.traverse(c,function(a){if(1===a.nodeType&&!b.isInline(a)&&b.isInline(a.parentNode)){var c;for(c=a;b.isInline(c.parentNode);)c=c.parentNode;var e=c.parentNode,i=b.extractContents(c,a);b.copyCSS(a,
a);e.insertBefore(i,c);e.insertBefore(a,c)}})},findCommonAncestor:function(c,d){return b(c).parents().has(b(d)).first()},extractContents:function(c,b){var a=this,f=a.findCommonAncestor(c,b),e=!1,i=!1;return function g(f){var j=c.ownerDocument.createDocumentFragment();a.traverse(f,function(a){if(i||a===b&&e)return i=!0,!1;a===c&&(e=!0);var f;e?(jQuery.contains(a,b)&&1===a.nodeType&&(f=g(a),a=a.cloneNode(!1),a.appendChild(f)),j.appendChild(a)):jQuery.contains(a,c)&&1===a.nodeType&&(f=g(a),a=a.cloneNode(!1),
a.appendChild(f),j.appendChild(a))});return j}(null===f?null:f.get(0))}};b.sceditor.commandExists=function(c){return"undefined"!==typeof b.sceditor.commands[c]};b.sceditor.setCommand=function(c,d,a,f){if(!c||!d)return!1;b.sceditor.commandExists(c)||(b.sceditor.commands[c]={});b.sceditor.commands[c].exec=d;a&&(b.sceditor.commands[c].tooltip=a);f&&(b.sceditor.commands[c].keyPress=f);return!0};b.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|print,source",
style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:"en",charset:"utf-8",emoticonsCompat:!1,emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",
":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",
":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,getHtmlHandler:null,getTextHandler:null,dateFormat:"year-month-day",toolbarContainer:null};b.fn.sceditor=function(c){return this.each(function(){new b.sceditor(this,
c)})}})(jQuery);(function(b){b.sceditorBBCodePlugin=function(c,d){var a=this,f,e,i;a.bbcodes=b.sceditorBBCodePlugin.bbcodes;var h={},g={},k={ul:["li"],ol:["li"],table:["tr","th"],tr:["td"],th:["td"],code:[],youtube:[]};f=function(c,d,e){var f,h=c.get(0).nodeName.toLowerCase(),e=!!e;if(!g[e])return d;b.each(g[e],function(e,g){if(!("a"===h&&("color"===e||"text-decoration"===e))&&!("code"===h&&"font-family"===e))f=c.css(e),c.parent().css(e)!==f&&b.each(g,function(e,h){if(null===h||-1<b.inArray(f.toString(),h))d=b.isFunction(a.bbcodes[e].format)?
a.bbcodes[e].format.call(a,c,d):i(a.bbcodes[e].format,d)})});return d};e=function(c,d,e){var f=c.get(0).nodeName.toLowerCase(),e=!!e;h[f]&&h[f][e]&&b.each(h[f][e],function(e,f){if(null!==f){var h=!1;b.each(f,function(a,d){if(!(null==c.attr(a)||null!==d&&0>b.inArray(c.attr(a),d)))return h=!0,!1});if(!h)return}d=b.isFunction(a.bbcodes[e].format)?a.bbcodes[e].format.call(a,c,d):i(a.bbcodes[e].format,d)});e&&/^(br|div|p)$/.test(f)&&("br"===f&&1===c[0].parentNode.childNodes.length||(d="\n"+d));return d};
i=function(){var a=arguments;return a[0].replace(/\{(\d+)\}/g,function(c,b){return"undefined"!==typeof a[b-0+1]?a[b-0+1]:"{"+b+"}"})};a.stripQuotes=function(a){return a.replace(/^["']+/,"").replace(/["']+$/,"")};a.getHtmlHandler=function(c,d){return b.trim(a.elementToBbcode(d))};a.elementToBbcode=function(a){return function q(a,c){var d="";b.sceditor.dom.traverse(a,function(a){var h=b(a),g="",j=a.nodeName.toLowerCase(),i=k[j],m=!0;"object"===typeof c&&((m=-1<b.inArray(j,c))||(i=c));3!==a.nodeType?
h.hasClass("sceditor-ignore")||("iframe"!==j&&(g=q(a,i)),m?(h.is("code")||(g=f(h,g),g=e(h,g),g=f(h,g,!0)),d+=e(h,g,!0)):d+=g):d+=a.nodeValue},!1,!0);return d}(a.get(0))};a.getTextHandler=function(c){var d,e,f=/\[([^\[\s=]*?)(?:([^\[]*?))?\]((?:[\s\S(?!=\[\\\1)](?!\[\1))*?)\[\/(\1)\]/g,h=/(\S+)=((?:(?:(["'])(?:\\\3|[^\3])*?\3))|(?:[^'"\s]+))/g;e=function(c,d,e,f){var g={},j;if(e)if(e=b.trim(e),"="===e.charAt(0)&&1>=e.split("=").length-1||"url"===d)g.defaultAttr=a.stripQuotes(e.substr(1));else for("="===
e.charAt(0)&&(e="defaultAttr"+e);j=h.exec(e);)g[j[1].toLowerCase()]=a.stripQuotes(j[2]);return!a.bbcodes[d]?c:b.isFunction(a.bbcodes[d].html)?a.bbcodes[d].html.call(a,d,g,f):i(a.bbcodes[d].html,f)};for(c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"").replace(/(\[\/?(?:left|center|right|justify)\])\n/g,"$1").replace(/\n/g,"<br />");c!==d;)d=c,c=c.replace(f,e);c=c.replace(/\[hr\]/gi,"<hr>");return c.replace(/ {2}(?=([^<\>]*?<|[^<\>]*?$))/g," &nbsp;")};a.options=
b.extend({},b.sceditor.defaultOptions,b.sceditorBBCodePlugin.defaultOptions,d);(function(){b.each(a.bbcodes,function(c){"undefined"!==typeof a.bbcodes[c].tags&&b.each(a.bbcodes[c].tags,function(d,b){var e=!!a.bbcodes[c].isBlock;h[d]=h[d]||{};h[d][e]=h[d][e]||{};h[d][e][c]=b});"undefined"!==typeof a.bbcodes[c].styles&&b.each(a.bbcodes[c].styles,function(d,b){var e=!!a.bbcodes[c].isBlock;g[e]=g[e]||{};g[e][d]=g[e][d]||{};g[e][d][c]=b})})})();new b.sceditor(c,b.extend({},a.options,{getHtmlHandler:a.getHtmlHandler,
getTextHandler:a.getTextHandler}))};b.sceditorBBCodePlugin.bbcodes={b:{styles:{"font-weight":"bold,bolder,401,700,800,900".split(",")},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},
sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{styles:{"font-family":null},format:function(c,d){return c.css("font-family")===this.options.defaultFont?d:"[font="+this.stripQuotes(c.css("font-family"))+"]"+d+"[/font]"},html:function(c,d,a){return'<font face="'+d.defaultAttr+'">'+a+"</font>"}},size:{styles:{"font-size":null},format:function(c,d){var a=c.css("fontSize"),b=1;if(a===this.options.defaultSize)return d;-1<a.indexOf("px")?(a=a.replace("px","")-0,12<a&&(b=2),15<a&&
(b=3),17<a&&(b=4),23<a&&(b=5),31<a&&(b=6),47<a&&(b=7)):b=a;return"[size="+b+"]"+d+"[/size]"},html:function(c,b,a){return'<font size="'+b.defaultAttr+'">'+a+"</font>"}},color:{styles:{color:null},format:function(c,b){var a=function(a){function c(a){a=parseInt(a,10);if(isNaN(a))return"00";a=Math.max(0,Math.min(a,255)).toString(16);return 2>a.length?"0"+a:a}var b;return(b=a.match(/rgb\((\d+),\s*?(\d+),\s*?(\d+)\)/i))?"#"+c(b[1])+c(b[2]-0)+c(b[3]-0):a}(c.css("color"));return a===this.options.defaultColor?
b:"[color="+a+"]"+b+"[/color]"},html:function(c,b,a){return'<font color="'+b.defaultAttr+'">'+a+"</font>"}},ul:{tags:{ul:null},isBlock:!0,format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{html:"<ul>{0}</ul>"},ol:{tags:{ol:null},isBlock:!0,format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{html:"<li>{0}</li>"},table:{tags:{table:null},format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},
th:{tags:{th:null},format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},format:"[td]{0}[/td]",html:'<td>{0}<br class="sceditor-ignore" /></td>'},emoticon:{tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(c,b){return c.attr("data-sceditor-emoticon")+b},html:"{0}"},horizontalrule:{tags:{hr:null},format:"[hr]{0}",html:"<hr />"},img:{tags:{img:{src:null}},format:function(c,d){return"undefined"!==typeof c.attr("data-sceditor-emoticon")?d:"[img"+("="+b(c).width()+"x"+b(c).height())+
"]"+c.attr("src")+"[/img]"},html:function(c,b,a){c="";"undefined"!==typeof b.width&&(c+=' width="'+b.width+'"');"undefined"!==typeof b.height&&(c+=' height="'+b.height+'"');"undefined"!==typeof b.defaultAttr&&(b=b.defaultAttr.split(/x/i),c=' width="'+b[0]+'" height="'+(2===b.length?b[1]:b[0])+'"');return"<img "+c+' src="'+a+'" />'}},url:{tags:{a:{href:null}},format:function(c,b){return"mailto:"===c.attr("href").substr(0,7)?"[email="+c.attr("href").substr(7)+"]"+b+"[/email]":"[url="+decodeURI(c.attr("href"))+
"]"+b+"[/url]"},html:function(b,d,a){if("undefined"===typeof d.defaultAttr||0===d.defaultAttr.length)d.defaultAttr=a;return'<a href="'+encodeURI(d.defaultAttr)+'">'+a+"</a>"}},email:{html:function(b,d,a){"undefined"===typeof d.defaultAttr&&(d.defaultAttr=a);return'<a href="mailto:'+d.defaultAttr+'">'+a+"</a>"}},quote:{tags:{blockquote:null},isBlock:!0,format:function(c,d){var a="";1===b(c).children("cite:first").length&&(a="="+b(c).children("cite:first").text(),b(c).children("cite:first").remove(),
d=this.elementToBbcode(b(c)));return"[quote"+a+"]"+d+"[/quote]"},html:function(b,d,a){"undefined"!==typeof d.defaultAttr&&(a="<cite>"+d.defaultAttr+"</cite>"+a);return"<blockquote>"+a+"</blockquote>"}},code:{tags:{code:null},isBlock:!0,format:"[code]{0}[/code]",html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isBlock:!0,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center",
"-khtml-center"]},isBlock:!0,format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isBlock:!0,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isBlock:!0,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},youtube:{tags:{iframe:{"data-youtube-id":null}},format:function(b,d){return!b.attr("data-youtube-id")?
d:"[youtube]"+b.attr("data-youtube-id")+"[/youtube]"},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'},ignore:{}};b.sceditorBBCodePlugin.commandExists=function(c){return"undefined"!==typeof b.sceditorBBCodePlugin.bbcodes[c]};b.sceditorBBCodePlugin.setCommand=function(c,d,a,f,e){if(!c||!f||!e)return!1;b.sceditorBBCodePlugin.commandExists(c)||(b.sceditorBBCodePlugin.bbcodes[c]={});b.sceditorBBCodePlugin.bbcodes[c].format=
f;b.sceditorBBCodePlugin.bbcodes[c].html=e;d&&(b.sceditorBBCodePlugin.bbcodes[c].tags=d);a&&(b.sceditorBBCodePlugin.bbcodes[c].styles=a);return!0};b.sceditorBBCodePlugin.defaultOptions={defaultSize:13,defaultColor:"#111111",defaultFont:"Verdana, Arial, Helvetica, sans-serif"};b.fn.sceditorBBCodePlugin=function(c){return this.each(function(){new b.sceditorBBCodePlugin(this,c)})}})(jQuery);
