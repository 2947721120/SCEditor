(function(c){c.sceditor=function(b,d){var a=this,f=c(b),e=null,h=null,g=null,i=null,k=null,l=null,m=!1,o=[],j=null,p=null,J=[],r,q,t,A,B,w,C,D,E,F,G,x,y,H,n,z,u,v,I,s;a.commands=c.sceditor.commands;D=function(){var b=c('<div contenteditable="true">')[0].contentEditable,b="undefined"!==typeof b&&"inherit"!==b;k=c("<textarea></textarea>").hide();g=c('<iframe frameborder="0"></iframe>');"https:"===window.location.protocol&&g.attr("src","javascript:false");e.append(g).append(k);i=g[0];v(f.width());u(f.height());
b||(n().designMode="On");n().open();n().write('<html><head><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /><meta http-equiv="Content-Type" content="text/html;charset='+a.options.charset+'" /><link rel="stylesheet" type="text/css" href="'+a.options.style+'" /></head><body contenteditable="true"></body></html>');n().close();b||(n().designMode="On");c(n()).find("body").keypress(w);c(n()).keypress(w);c(n()).mousedown(C);c(n()).bind("beforedeactivate keypress",B);c(n()).focus(function(){j=
null})};E=function(){var b=function(b){A(c(this),a.commands[c(this).data("sceditor-command")]);b.preventDefault()};h=c('<div class="sceditor-toolbar" />');var d=a.options.toolbar.split("|"),f,m,g,o;for(o=0;o<d.length;o++){f=c('<div class="sceditor-group" />');m=d[o].split(",");for(var j=0;j<m.length;j++)a.commands.hasOwnProperty(m[j])&&(g=a.commands[m[j]].tooltip?a._(a.commands[m[j]].tooltip):m[j],g=c('<a class="sceditor-button sceditor-button-'+m[j]+' " unselectable="on"><div unselectable="on">'+
g+"</div></a>"),a.commands[m[j]].hasOwnProperty("tooltip")&&g.attr("title",a._(a.commands[m[j]].tooltip)),a.commands[m[j]].exec?g.data("sceditor-wysiwygmode",!0):g.addClass("disabled"),a.commands[m[j]].txtExec&&g.data("sceditor-txtmode",!0),g.data("sceditor-command",m[j]),g.click(b),f.append(g));h.append(f)}null===a.options.toolbarContainer?e.append(h):c(a.options.toolbarContainer).append(h)};F=function(){c.each(a.commands,function(a,c){"undefined"!==typeof c.keyPress&&o.push(c.keyPress)})};v=function(a){e.width(a);
g.width(a);g.width(a+(a-g.outerWidth(!0)));k.width(a);k.width(a+(a-k.outerWidth(!0)))};u=function(c){e.height(c);c-=null===a.options.toolbarContainer?h.outerHeight():0;g.height(c);g.height(c+(c-g.outerHeight(!0)));k.height(c);k.height(c+(c-k.outerHeight(!0)))};G=function(){var b=c('<div class="sceditor-grip" />'),d=c('<div class="sceditor-resize-cover" />'),f=0,m=0,g=0,j=0,h=e.width(),o=e.height(),i=!1,p,k,t,q,l;p=null==a.options.resizeMinHeight?o/2:a.options.resizeMinHeight;k=null==a.options.resizeMaxHeight?
2*o:a.options.resizeMaxHeight;t=null==a.options.resizeMinWidth?h/2:a.options.resizeMinWidth;q=null==a.options.resizeMaxWidth?2*h:a.options.resizeMaxWidth;l=function(a){var c=j+(a.pageY-m),b=g+(a.pageX-f);b>=t&&(0>q||b<=q)&&v(b);c>=p&&(0>k||c<=k)&&u(c);a.preventDefault()};e.append(b);e.append(d.hide());b.mousedown(function(a){f=a.pageX;m=a.pageY;g=e.width();j=e.height();i=!0;d.show();c(document).bind("mousemove",l);a.preventDefault()});c(document).mouseup(function(a){i&&(i=!1,d.hide(),c(document).unbind("mousemove",
l),a.preventDefault())})};y=function(b){a.updateTextareaValue();c(this).removeAttr("novalidate");this.checkValidity&&!this.checkValidity()&&b.preventDefault();c(this).attr("novalidate","novalidate")};a.destory=function(){c(document).unbind("click",x);f.removeAttr("novalidate").unbind("submit",y);c(window).unbind("resize",z);e.remove();e=null;f.removeData("sceditor").show()};H=function(){var b=c.extend({},a.options.emoticons.more,a.options.emoticons.dropdown,a.options.emoticons.hidden);c.each(b,function(a,
c){var b=document.createElement("img");b.src=c;J.push(b)})};a.createDropDown=function(b,d,e,f){a.closeDropDown();!1!==f&&(e=c(e),e.find(":not(input,textarea)").filter(function(){return 1===this.nodeType}).attr("unselectable","on"));l=c('<div class="sceditor-dropdown sceditor-'+d+'" />').css({top:b.offset().top,left:b.offset().left}).append(e);l.appendTo(c("body"));m=!0;l.click(function(a){a.stopPropagation()})};x=function(c){!m&&3!==c.which&&a.closeDropDown();m=!1};a.closeDropDown=function(c){null!==
l&&(l.remove(),l=null);!0===c&&a.focus()};n=function(){return i.contentDocument?i.contentDocument:i.contentWindow&&i.contentWindow.document?i.contentWindow.document:i.document?i.document:null};a.wysiwygEditorInsertHtml=function(b,d,e){a.focus();if(e||!(c(r()).is("code")||0!==c(r()).parents("code").length)){"undefined"!==typeof d&&null!==d&&(b=b+a.getWysiwygSelectedHtml()+d);if(n().getSelection){d=q();e=n().createElement("div");e.innerHTML=b;e=e.children[0];d.deleteContents();d.insertNode(e);d=d.cloneRange();
if(e.parentNode!==d.startContainer||!c.browser.opera)d.setStartAfter(e);else return;i.contentWindow.getSelection().removeAllRanges();i.contentWindow.getSelection().addRange(d)}else n().selection&&n().selection.createRange?n().selection.createRange().pasteHTML(b):a.execCommand("insertHtml",b);j=null}};a.wysiwygEditorInsertText=function(c){c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\r\n|\r/g,"\n").replace(/\n/g,"<br />");a.wysiwygEditorInsertHtml("<span>"+
c+"</span>")};q=function(){var a;i.contentWindow&&i.contentWindow.getSelection?a=i.contentWindow.getSelection():n().selection&&(a=n().selection);a.getRangeAt&&0>=a.rangeCount&&a.addRange(n().createRange());return a.getRangeAt?a.getRangeAt(0):a.createRange?a.createRange():null};a.getWysiwygSelectedHtml=function(){var a=q();if(null===a)return"";if(document.selection&&document.selection.createRange){if(""===a.text)return"";if("undefined"!==typeof a.htmlText)return a.htmlText}if(window.XMLSerializer){var b=
"";c(a.cloneContents().childNodes).each(function(){b+=(new XMLSerializer).serializeToString(this)});return b}};r=function(){var a=q();if(null===a)return null;if(window.getSelection&&"undefined"!==typeof a.commonAncestorContainer)return a.commonAncestorContainer;if(document.selection&&document.selection.createRange)return a.parentElement()};a.getWysiwygEditorValue=function(b){var d=g.contents().find("body");c.sceditor.dom.fixNesting(d.get(0));var e=d.html();!1!==b&&a.options.getHtmlHandler&&(e=a.options.getHtmlHandler(e,
d));return e};a.getTextareaValue=function(c){var b=k.val();!1!==c&&a.options.getTextHandler&&(b=a.options.getTextHandler(b));return b};a.setWysiwygEditorValue=function(a){n().body.innerHTML=t(a)};a.setTextareaValue=function(a){k.val(a)};a.updateTextareaValue=function(){s()?f.val(a.getTextareaValue(!1)):f.val(a.getWysiwygEditorValue())};t=function(b){var d=c.extend({},a.options.emoticons.more,a.options.emoticons.dropdown,a.options.emoticons.hidden);c.each(d,function(c,d){var e=a.regexEscape(c)+"(?=([^\\<\\>]*?<(?!/code)|[^\\<\\>]*?$))",
f="";a.options.emoticonsCompat&&(e="((>|^|\\s){1})"+e+"(?=(\\s|$|<){1})",f="$1");b=b.replace(RegExp(e,"gm"),f+'<img src="'+d+'" data-sceditor-emoticon="'+c+'" alt="'+c+'" />')});return b};a.regexEscape=function(a){return a.replace(/[\$\?\[\]\.\*\(\)\|]/g,"\\$&").replace("<","&lt;").replace(">","&gt;")};s=function(){return k.is(":visible")};a.toggleTextMode=function(){s()?a.setWysiwygEditorValue(a.getTextareaValue()):a.setTextareaValue(a.getWysiwygEditorValue());h.find(".sceditor-button").removeClass("disabled");
j=null;k.toggle();g.toggle();h.find(".sceditor-button").each(function(){var a=c(this);s()&&!a.data("sceditor-txtmode")?a.addClass("disabled"):!s()&&!a.data("sceditor-wysiwygmode")&&a.addClass("disabled")})};A=function(b,d){s()?d.hasOwnProperty("txtExec")&&d.txtExec.call(a,b):d.hasOwnProperty("exec")&&(c.isFunction(d.exec)?d.exec.call(a,b):a.execCommand(d.exec,d.hasOwnProperty("execParam")?d.execParam:null))};a.focus=function(){i.contentWindow.focus();null!==j&&(window.document.createRange?window.getSelection().addRange(j):
window.document.selection&&j.select(),j=null)};B=function(){c.browser.msie&&(j=q())};a.execCommand=function(b,d){var e=!1;a.focus();if(!(c(r()).is("code")||0!==c(r()).parents("code").length)){if(n())try{e=n().execCommand(b,!1,d)}catch(f){}!e&&"undefined"!==typeof a.commands[b]&&"undefined"!==typeof a.commands[b].errorMessage&&alert(a._(a.commands[b].errorMessage))}};w=function(b){a.closeDropDown();var d=r(),d=c(d);if(13===b.which&&(d.is("code, blockquote")||0!==d.parents("code, blockquote").length))return a.wysiwygEditorInsertHtml("<br />",
null,!0),!1;var e=n();c.sceditor.dom.rTraverse(e.body,function(a){if(3===a.nodeType&&""!==a.nodeValue||"br"===a.nodeName.toLowerCase())return 0<c(a).parents("code, blockquote").length&&c(e.body).append(e.createElement("br")),!1},!0);if(!(d.is("code")||0!==d.parents("code").length))for(d=o.length;d--;)o[d].call(a,b,i,k)};C=function(){a.closeDropDown();j=null};z=function(){null!==a.options.height&&-1<a.options.height.toString().indexOf("%")&&u(e.parent().height()*(parseFloat(a.options.height)/100));
null!==a.options.width&&-1<a.options.width.toString().indexOf("%")&&v(e.parent().width()*(parseFloat(a.options.width)/100))};a._=function(){var a=arguments;null!==p&&p[a[0]]&&(a[0]=p[a[0]]);return a[0].replace(/\{(\d+)\}/g,function(b,d){return"undefined"!==typeof a[d-0+1]?a[d-0+1]:"{"+d+"}"})};I=function(){if(c.sceditor.locale[a.options.locale])p=c.sceditor.locale[a.options.locale];else{var b=a.options.locale.split("-");c.sceditor.locale[b[0]]&&(p=c.sceditor.locale[b[0]])}null!==p&&p.dateFormat&&
(a.options.dateFormat=p.dateFormat)};(function(){f.data("sceditor",a);a.options=c.extend({},c.sceditor.defaultOptions,d);null!==a.options.locale&&"en"!==a.options.locale&&I();null!==a.options.height&&f.height(a.options.height);null!==a.options.width&&f.width(a.options.width);(null!==a.options.height&&-1<a.options.height.toString().indexOf("%")||null!==a.options.width&&-1<a.options.width.toString().indexOf("%"))&&c(window).resize(z);e=c('<div class="sceditor-container" />').width(f.outerWidth()).height(f.outerHeight());
f.after(e);E();D();F();a.options.resizeEnabled&&G();c(document).click(x);f.parents("form").attr("novalidate","novalidate").submit(y);var b=f.hide().val();a.options.getTextHandler&&(b=a.options.getTextHandler(b));a.setWysiwygEditorValue(b);-1!=a.options.toolbar.indexOf("emoticon")&&H()})()};c.sceditor.locale={};c.sceditor.commands={bold:{exec:"bold",tooltip:"Bold"},italic:{exec:"italic",tooltip:"Italic"},underline:{exec:"underline",tooltip:"Underline"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},
subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{exec:function(b){for(var d=this,a=d.options.fonts.split(","),f=c("<div />"),e=function(a){d.execCommand("fontname",c(this).data("sceditor-font"));d.closeDropDown(!0);a.preventDefault()},h=0;h<a.length;h++)f.append(c('<a class="sceditor-font-option" href="#"><font face="'+
a[h]+'">'+a[h]+"</font></a>").data("sceditor-font",a[h]).click(e));d.createDropDown(b,"font-picker",f)},tooltip:"Font Name"},size:{exec:function(b){for(var d=this,a=c("<div />"),f=function(a){d.execCommand("fontsize",c(this).data("sceditor-fontsize"));d.closeDropDown(!0);a.preventDefault()},e=1;7>=e;e++)a.append(c('<a class="sceditor-fontsize-option" href="#"><font size="'+e+'">'+e+"</font></a>").data("sceditor-fontsize",e).click(f));d.createDropDown(b,"fontsize-picker",a)},tooltip:"Font Size"},color:{exec:function(b){for(var d=
this,a={r:255,g:255,b:255},f=c("<div />"),e=this.options.colors?this.options.colors.split("|"):Array(21),h=[],g=0,i=0;i<e.length;++i){var k="undefined"!==typeof e[i]?e[i].split(","):Array(21);h[g++]='<div class="sceditor-color-column">';for(var l=0;l<k.length;++l){var m="undefined"!==typeof k[l]?k[l]:"#"+a.r.toString(16)+a.g.toString(16)+a.b.toString(16);h[g++]='<a href="#" class="sceditor-color-option" style="background-color: '+m+'" data-color="'+m+'"></a>';a=0===l%5?{r:a.r,g:a.g-51,b:255}:{r:a.r,
g:a.g,b:a.b-51}}h[g++]="</div>";a=0===i%5?{r:a.r-51,g:255,b:255}:{r:a.r,g:255,b:255}}f.append(h.join("")).find("a").click(function(a){d.execCommand("forecolor",c(this).attr("data-color"));d.closeDropDown(!0);a.preventDefault()});d.createDropDown(b,"color-picker",f)},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",
tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(b){var d=this;content=c(this._('<form><div><label for="txt">{0}</label> <textarea cols="20" rows="7" id="txt"></textarea></div></form>',this._("Paste your text inside the following box:"))).submit(function(){return!1});
content.append(c(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){d.wysiwygEditorInsertText(c(this).parent("form").find("#txt").val());d.closeDropDown(!0);a.preventDefault()}));d.createDropDown(b,"pastetext",content)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},table:{exec:function(b){var d=this,a=c(this._('<form><div><label for="rows">{0}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{1}</label><input type="text" id="cols" value="2" /></div></form>',
this._("Rows:"),this._("Cols:"))).submit(function(){return!1});a.append(c(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){var b=c(this).parent("form").find("#rows").val()-0,h=c(this).parent("form").find("#cols").val()-0,g="<table>";if(!(1>b||1>h)){for(var i=0;i<b;i++){for(var g=g+"<tr>",k=0;k<h;k++)g=c.browser.msie?g+"<td></td>":g+'<td><br class="sceditor-ignore" /></td>';g+="</tr>"}d.wysiwygEditorInsertHtml(g+"</table>");d.closeDropDown(!0);
a.preventDefault()}}));d.createDropDown(b,"inserttable",a)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{exec:function(b){var d=this,a=c(this._('<form><div><label for="link">{0}</label> <input type="text" id="image" value="http://" /></div><div><label for="width">{1}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{2}</label> <input type="text" id="height" size="2" /></div></form>',
this._("URL:"),this._("Width (optional):"),this._("Height (optional):"))).submit(function(){return!1});a.append(c(this._('<div><input type="button" class="button" value="Insert" /></div>',this._("Insert"))).click(function(a){var b=c(this).parent("form"),h=b.find("#image").val(),g="",i;if(i=b.find("#width").val())g+=' width="'+i+'"';if(b=b.find("#height").val())g+=' height="'+b+'"';h&&"http://"!==h&&d.wysiwygEditorInsertHtml("<img"+g+' src="'+h+'" />');d.closeDropDown(!0);a.preventDefault()}));d.createDropDown(b,
"insertimage",a)},tooltip:"Insert an image"},email:{exec:function(b){var d=this,a=c(this._('<form><div><label for="email">{0}</label> <input type="text" id="email" value="" /></div></form>',this._("E-mail:"))).submit(function(){return!1});a.append(c('<div><input type="button" class="button" value="Insert" /></div>').click(function(a){var b=c(this).parent("form").find("#email").val();b&&(d.focus(),d.getWysiwygSelectedHtml()?d.execCommand("createlink","mailto:"+b):d.wysiwygEditorInsertHtml('<a href="mailto:'+
b+'">'+b+"</a>"));d.closeDropDown(!0);a.preventDefault()}));d.createDropDown(b,"insertemail",a)},tooltip:"Insert an email"},link:{exec:function(b){var d=this,a=c(this._('<form><div><label for="link">{0}</label> <input type="text" id="link" value="http://" /></div><div><label for="des">{1}</label> <input type="text" id="des" value="" /></div></form>',this._("URL:"),this._("Description (optional):"))).submit(function(){return!1});a.append(c(this._('<div><input type="button" class="button" value="{0}" /></div>',
this._("Insert"))).click(function(a){var b=c(this).parent("form").find("#link").val(),h=c(this).parent("form").find("#des").val();""!==b&&"http://"!==b&&(d.focus(),!d.getWysiwygSelectedHtml()||h?(h||(h=b),d.wysiwygEditorInsertHtml('<a href="'+b+'">'+h+"</a>")):d.execCommand("createlink",b));d.closeDropDown(!0);a.preventDefault()}));d.createDropDown(b,"insertlink",a)},tooltip:"Insert a link"},unlink:{exec:"unlink",tooltip:"Unlink"},quote:{exec:function(b,d,a){var b="<blockquote>",c="</blockquote>";
d?(b=b+(a?"<cite>"+a+"</cite>":"")+d+c+"<br />",c=null):""==this.getWysiwygSelectedHtml()&&(c="<br />"+c);this.wysiwygEditorInsertHtml(b,c)},tooltip:"Insert a Quote"},emoticon:{exec:function(b){var d,a=this,f=c("<div />"),e=c("<div />");d=function(b,d){e.append(c("<img />").attr({src:d,alt:b}).click(function(b){var d,e;a.options.emoticonsCompat&&(d="<span> ",e=" </span>");a.wysiwygEditorInsertHtml(d+'<img src="'+c(this).attr("src")+'" data-sceditor-emoticon="'+c(this).attr("alt")+'" />'+e);a.closeDropDown(!0);
b.preventDefault()}));3<e.children().length&&(f.append(e),e=c("<div />"))};c.each(a.options.emoticons.dropdown,d);0<e.children().length&&f.append(e);if("undefined"!==typeof a.options.emoticons.more){var h=c(this._('<a class="sceditor-more">{0}</a>',this._("More"))).click(function(){var g=c.extend({},a.options.emoticons.dropdown,a.options.emoticons.more);f=c("<div />");e=c("<div />");c.each(g,d);0<e.children().length&&f.append(e);a.createDropDown(b,"insertemoticon",f)});f.append(h)}a.createDropDown(b,
"insertemoticon",f)},keyPress:function(b,d){var a=null,f=-1,e=this;d.contentWindow&&d.contentWindow.getSelection&&(a=d.contentWindow.getSelection().getRangeAt(0));if(null!=a&&a.startContainer){e.allEmoticonCache||(e.allEmoticonCache=c.extend({},e.options.emoticons.more,e.options.emoticons.dropdown,e.options.emoticons.hidden));e.longestEmoticonCode||(e.longestEmoticonCode=0,c.each(e.allEmoticonCache,function(a){a.length>e.longestEmoticonCode&&(e.longestEmoticonCode=a.length)}),e.options.emoticonsCompat&&
(e.longestEmoticonCode+=1));var h=String.fromCharCode(b.which),g=e.options.emoticonsCompat?/\s/.test(h):!1,i=a.startContainer.textContent.substr(0,a.startOffset),k=a.startContainer.textContent.substr(a.startOffset,e.longestEmoticonCode),l=i+h+k;c.each(e.allEmoticonCache,function(c,o){if(-1<(f=l.indexOf(c,a.startOffset-c.length))){if(e.options.emoticonsCompat){var j=RegExp("(\\s{1})"+e.regexEscape(c)+"(?=\\s{1})","gm");if(g&&-1<(h+k).indexOf(c)||!j.test(l))return}a=a.cloneRange();a.setStart(a.startContainer,
f);a.setEnd(a.startContainer,f+c.length-(g?0:1));a.deleteContents();j=d.contentDocument.createElement("div");j.innerHTML='<img src="'+o+'" data-sceditor-emoticon="'+c+'" alt="'+c+'" />';j=j.children[0];a.insertNode(j);a=a.cloneRange();a.setStartAfter(j);d.contentWindow.getSelection().removeAllRanges();d.contentWindow.getSelection().addRange(a);g||(b.preventDefault(),b.stopPropagation());return!1}})}},tooltip:"Insert an emoticon"},youtube:{exec:function(b){var d=this,a=c(this._('<form><div><label for="link">{0}</label> <input type="text" id="link" value="http://" /></div></form>',
this._("Video URL:"))).submit(function(){return!1});a.append(c(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){var b=c(this).parent("form").find("#link").val();""!==b&&"http://"!==b&&(b=b.replace(/^[^v]+v.(.{11}).*/,"$1"),d.wysiwygEditorInsertHtml('<iframe width="560" height="315" src="http://www.youtube.com/embed/'+b+'?wmode=opaque" data-youtube-id="'+b+'" frameborder="0" allowfullscreen></iframe>'));d.closeDropDown(!0);a.preventDefault()}));
d.createDropDown(b,"insertlink",a)},tooltip:"Insert a YouTube video"},date:{exec:function(){var b=new Date,c=b.getYear(),a=b.getMonth()+1,b=b.getDate();2E3>c&&(c=1900+c);10>a&&(a="0"+a);10>b&&(b="0"+b);this.wysiwygEditorInsertHtml("<span>"+this.options.dateFormat.replace(/year/i,c).replace(/month/i,a).replace(/day/i,b)+"</span>")},tooltip:"Insert current date"},time:{exec:function(){var b=new Date,c=b.getHours(),a=b.getMinutes(),b=b.getSeconds();10>c&&(c="0"+c);10>a&&(a="0"+a);10>b&&(b="0"+b);this.wysiwygEditorInsertHtml("<span>"+
c+":"+a+":"+b+"</span>")},tooltip:"Insert current time"},print:{exec:"print",tooltip:"Print"},source:{exec:function(){this.toggleTextMode()},txtExec:function(){this.toggleTextMode()},tooltip:"View source"},ignore:{}};c.sceditor.dom={traverse:function(b,c,a,f,e){if(b)for(b=e?b.lastChild:b.firstChild;null!=b;){if(!a&&!1===c(b)||!f&&!1===this.traverse(b,c,a,f,e)||a&&!1===c(b))return!1;b=e?b.previousSibling:b.nextSibling}},rTraverse:function(b,c,a,f){this.traverse(b,c,a,f,!0)},isInline:function(b,c){var a=
(window.getComputedStyle?window.getComputedStyle(b):b.currentStyle).display;return c?"block"!==a:"inline"===a},copyCSS:function(b,d){for(var a="font-size,color,font-family,font-wieght,font-style,text-decoration".split(","),f=a.length,e=c(b),h=c(d);f--;)h.css(a[f],e.css(a[f]))},fixNesting:function(b){var c=this;c.traverse(b,function(a){if(1===a.nodeType&&!c.isInline(a)&&c.isInline(a.parentNode)){var b;for(b=a;c.isInline(b.parentNode);)b=b.parentNode;var e=b.parentNode,h=c.extractContents(b,a);c.copyCSS(a,
a);e.insertBefore(h,b);e.insertBefore(a,b)}})},findCommonAncestor:function(b,d){return c(b).parents().has(c(d)).first()},extractContents:function(b,c){var a=this,f=a.findCommonAncestor(b,c),e=!1,h=!1;return function i(f){var l=b.ownerDocument.createDocumentFragment();a.traverse(f,function(a){if(h||a===c&&e)return h=!0,!1;a===b&&(e=!0);var f;e?(jQuery.contains(a,c)&&1===a.nodeType&&(f=i(a),a=a.cloneNode(!1),a.appendChild(f)),l.appendChild(a)):jQuery.contains(a,b)&&1===a.nodeType&&(f=i(a),a=a.cloneNode(!1),
a.appendChild(f),l.appendChild(a))});return l}(null===f?null:f.get(0))}};c.sceditor.commandExists=function(b){return"undefined"!==typeof c.sceditor.commands[b]};c.sceditor.setCommand=function(b,d,a,f){if(!b||!d)return!1;c.sceditor.commandExists(b)||(c.sceditor.commands[b]={});c.sceditor.commands[b].exec=d;a&&(c.sceditor.commands[b].tooltip=a);f&&(c.sceditor.commands[b].keyPress=f);return!0};c.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|print,source",
style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:"en",charset:"utf-8",emoticonsCompat:!1,emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",
":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",
":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,getHtmlHandler:null,getTextHandler:null,dateFormat:"year-month-day",toolbarContainer:null};c.fn.sceditor=function(b){return this.each(function(){new c.sceditor(this,
b)})}})(jQuery);(function(c){c.sceditorBBCodePlugin=function(b,d){var a=this,f,e,h,g;a.bbcodes=c.sceditorBBCodePlugin.bbcodes;var i={},k={},l={ul:["li"],ol:["li"],table:["tr","th"],tr:["td"],th:["td"],code:[],youtube:[]};g=function(a,b){var d=c.camelCase(b),e;return"text-align"===b&&(e=c(a),e.parent().css(b)!==e.css(b))?e.css(b):a.style?a.style[d]:null};f=function(b,d,e){var f;b[0].nodeName.toLowerCase();e=!!e;if(!k[e])return d;c.each(k[e],function(e,j){f=g(b[0],e);null==f||""==f||g(b.parent()[0],e)===f||c.each(j,
function(e,g){if(null===g||-1<c.inArray(f.toString(),g))d=c.isFunction(a.bbcodes[e].format)?a.bbcodes[e].format.call(a,b,d):h(a.bbcodes[e].format,d)})});return d};e=function(b,d,e){var f=b.get(0).nodeName.toLowerCase(),e=!!e;i[f]&&i[f][e]&&c.each(i[f][e],function(e,f){if(null!==f){var g=!1;c.each(f,function(a,d){if(!(null==b.attr(a)||null!==d&&0>c.inArray(b.attr(a),d)))return g=!0,!1});if(!g)return}d=c.isFunction(a.bbcodes[e].format)?a.bbcodes[e].format.call(a,b,d):h(a.bbcodes[e].format,d)});e&&/^(br|div|p)$/.test(f)&&
(e=b[0].parentNode.childNodes,!("br"===f&&1===e.length)&&!("br"===f&&e[e.length-1]===b[0])&&(d+="\n"),"br"!==f&&!c.sceditor.dom.isInline(b.parent()[0])&&b[0].previousSibling&&3===b[0].previousSibling.nodeType&&(d="\n"+d));return d};h=function(){var a=arguments;return a[0].replace(/\{(\d+)\}/g,function(b,c){return"undefined"!==typeof a[c-0+1]?a[c-0+1]:"{"+c+"}"})};a.stripQuotes=function(a){return a.replace(/^["']+/,"").replace(/["']+$/,"")};a.getHtmlHandler=function(b,d){return c.trim(a.elementToBbcode(d))};
a.elementToBbcode=function(a){return function j(a,b){var d="";c.sceditor.dom.traverse(a,function(a){var g=c(a),h="",i=a.nodeName.toLowerCase(),m=l[i],k=!0;"object"===typeof b&&((k=-1<c.inArray(i,b))||(m=b));3!==a.nodeType?g.hasClass("sceditor-ignore")||("iframe"!==i&&(h=j(a,m)),k?(g.is("code")||(h=f(g,h),h=e(g,h),h=f(g,h,!0)),d+=e(g,h,!0)):d+=h):d+=a.nodeValue},!1,!0);return d}(a.get(0))};a.getTextHandler=function(b){var d,e,f=/\[([^\[\s=]*?)(?:([^\[]*?))?\]((?:[\s\S(?!=\[\\\1)](?!\[\1))*?)\[\/(\1)\]/g,
g=/(\S+)=((?:(?:(["'])(?:\\\3|[^\3])*?\3))|(?:[^'"\s]+))/g;e=function(b,d,e,f){var i={},j;if(e)if(e=c.trim(e),"="===e.charAt(0)&&1>=e.split("=").length-1||"url"===d)i.defaultAttr=a.stripQuotes(e.substr(1));else for("="===e.charAt(0)&&(e="defaultAttr"+e);j=g.exec(e);)i[j[1].toLowerCase()]=a.stripQuotes(j[2]);return!a.bbcodes[d]?b:c.isFunction(a.bbcodes[d].html)?a.bbcodes[d].html.call(a,d,i,f):h(a.bbcodes[d].html,f)};for(b=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,
"").replace(/(\[\/?(?:left|center|right|justify)\])\n/g,"$1").replace(/\n/g,"<br />");b!==d;)d=b,b=b.replace(f,e);b=b.replace(/\[hr\]/gi,"<hr>");return b.replace(/ {2}(?=([^<\>]*?<|[^<\>]*?$))/g," &nbsp;")};a.options=c.extend({},c.sceditor.defaultOptions,d);(function(){c.each(a.bbcodes,function(b){"undefined"!==typeof a.bbcodes[b].tags&&c.each(a.bbcodes[b].tags,function(c,d){var e=!!a.bbcodes[b].isBlock;i[c]=i[c]||{};i[c][e]=i[c][e]||{};i[c][e][b]=d});"undefined"!==typeof a.bbcodes[b].styles&&c.each(a.bbcodes[b].styles,
function(c,d){var e=!!a.bbcodes[b].isBlock;k[e]=k[e]||{};k[e][c]=k[e][c]||{};k[e][c][b]=d})})})();new c.sceditor(b,c.extend({},a.options,{getHtmlHandler:a.getHtmlHandler,getTextHandler:a.getTextHandler}))};c.sceditorBBCodePlugin.bbcodes={b:{tags:{b:null,strong:null},styles:{"font-weight":"bold,bolder,401,700,800,900".split(",")},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},
styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{tags:{font:{face:null}},styles:{"font-family":null},format:function(b,c){return"font"===b[0].nodeName.toLowerCase()&&b.attr("face")?"[font="+this.stripQuotes(b.attr("face"))+
"]"+c+"[/font]":"[font="+this.stripQuotes(b.css("font-family"))+"]"+c+"[/font]"},html:function(b,c,a){return'<font face="'+c.defaultAttr+'">'+a+"</font>"}},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(b,c){var a=b.css("fontSize"),f=1;"font"===b[0].nodeName.toLowerCase()&&b.attr("size")&&(a=b.attr("size"));-1<a.indexOf("px")?(a=a.replace("px","")-0,12<a&&(f=2),15<a&&(f=3),17<a&&(f=4),23<a&&(f=5),31<a&&(f=6),47<a&&(f=7)):f=a;return"[size="+f+"]"+c+"[/size]"},html:function(b,
c,a){return'<font size="'+c.defaultAttr+'">'+a+"</font>"}},color:{tags:{font:{color:null}},styles:{color:null},format:function(b,c){var a=function(a){function b(a){a=parseInt(a,10);if(isNaN(a))return"00";a=Math.max(0,Math.min(a,255)).toString(16);return 2>a.length?"0"+a:a}var c;return(c=a.match(/rgb\((\d+),\s*?(\d+),\s*?(\d+)\)/i))?"#"+b(c[1])+b(c[2]-0)+b(c[3]-0):a}(b.css("color"));"font"===b[0].nodeName.toLowerCase()&&b.attr("color")&&(a=b.attr("color"));return"[color="+a+"]"+c+"[/color]"},html:function(b,
c,a){return'<font color="'+c.defaultAttr+'">'+a+"</font>"}},ul:{tags:{ul:null},isBlock:!0,format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{html:"<ul>{0}</ul>"},ol:{tags:{ol:null},isBlock:!0,format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{html:"<li>{0}</li>"},table:{tags:{table:null},format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},format:"[th]{0}[/th]",
html:"<th>{0}</th>"},td:{tags:{td:null},format:"[td]{0}[/td]",html:'<td>{0}<br class="sceditor-ignore" /></td>'},emoticon:{tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(b,c){return b.attr("data-sceditor-emoticon")+c},html:"{0}"},horizontalrule:{tags:{hr:null},format:"[hr]{0}",html:"<hr />"},img:{tags:{img:{src:null}},format:function(b,d){return"undefined"!==typeof b.attr("data-sceditor-emoticon")?d:"[img"+("="+c(b).width()+"x"+c(b).height())+"]"+b.attr("src")+"[/img]"},html:function(b,
c,a){b="";"undefined"!==typeof c.width&&(b+=' width="'+c.width+'"');"undefined"!==typeof c.height&&(b+=' height="'+c.height+'"');"undefined"!==typeof c.defaultAttr&&(c=c.defaultAttr.split(/x/i),b=' width="'+c[0]+'" height="'+(2===c.length?c[1]:c[0])+'"');return"<img "+b+' src="'+a+'" />'}},url:{tags:{a:{href:null}},format:function(b,c){return"mailto:"===b.attr("href").substr(0,7)?"[email="+b.attr("href").substr(7)+"]"+c+"[/email]":"[url="+decodeURI(b.attr("href"))+"]"+c+"[/url]"},html:function(b,
c,a){if("undefined"===typeof c.defaultAttr||0===c.defaultAttr.length)c.defaultAttr=a;return'<a href="'+encodeURI(c.defaultAttr)+'">'+a+"</a>"}},email:{html:function(b,c,a){"undefined"===typeof c.defaultAttr&&(c.defaultAttr=a);return'<a href="mailto:'+c.defaultAttr+'">'+a+"</a>"}},quote:{tags:{blockquote:null},isBlock:!0,format:function(b,d){var a="";1===c(b).children("cite:first").length&&(a="="+c(b).children("cite:first").text(),c(b).children("cite:first").remove(),d=this.elementToBbcode(c(b)));
return"[quote"+a+"]"+d+"[/quote]"},html:function(b,c,a){"undefined"!==typeof c.defaultAttr&&(a="<cite>"+c.defaultAttr+"</cite>"+a);return"<blockquote>"+a+"</blockquote>"}},code:{tags:{code:null},isBlock:!0,format:"[code]{0}[/code]",html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isBlock:!0,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isBlock:!0,
format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isBlock:!0,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isBlock:!0,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},youtube:{tags:{iframe:{"data-youtube-id":null}},format:function(b,c){return!b.attr("data-youtube-id")?
c:"[youtube]"+b.attr("data-youtube-id")+"[/youtube]"},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'},ignore:{}};c.sceditorBBCodePlugin.commandExists=function(b){return"undefined"!==typeof c.sceditorBBCodePlugin.bbcodes[b]};c.sceditorBBCodePlugin.setCommand=function(b,d,a,f,e){if(!b||!f||!e)return!1;c.sceditorBBCodePlugin.commandExists(b)||(c.sceditorBBCodePlugin.bbcodes[b]={});c.sceditorBBCodePlugin.bbcodes[b].format=
f;c.sceditorBBCodePlugin.bbcodes[b].html=e;d&&(c.sceditorBBCodePlugin.bbcodes[b].tags=d);a&&(c.sceditorBBCodePlugin.bbcodes[b].styles=a);return!0};c.fn.sceditorBBCodePlugin=function(b){return this.each(function(){new c.sceditorBBCodePlugin(this,b)})}})(jQuery);
