(function(a){a.sceditor=function(J,w){var r=this;var x=a(J);var g=J;var N=null;var f=null;var G=null;var y=null;var q=null;var o=null;var B=false;var z=[];var E=null;var b=[];var s=null;var l=null;var I,n,p,K,L,j,h,i,e,M,m,d,C,v,u,c,D,k,A,t;r.commands={bold:{exec:"bold",tooltip:"Bold"},italic:{exec:"italic",tooltip:"Italic"},underline:{exec:"underline",tooltip:"Underline"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{exec:function(P){var S=r.options.fonts.split(",");var R=a("<div />");var O=function(T){r.execCommand("fontname",a(this).data("sceditor-font"));n();r.focus();T.preventDefault()};for(var Q=0;Q<S.length;Q++){R.append(a('<a class="sceditor-font-option" href="#"><font face="'+S[Q]+'">'+S[Q]+"</font></a>").data("sceditor-font",S[Q]).click(O))}p(P,"font-picker",R)},tooltip:"Font Name"},size:{exec:function(P){var R=a("<div />");var O=function(S){r.execCommand("fontsize",a(this).data("sceditor-fontsize"));n();r.focus();S.preventDefault()};for(var Q=1;Q<=7;Q++){R.append(a('<a class="sceditor-fontsize-option" href="#"><font size="'+Q+'">'+Q+"</font></a>").data("sceditor-fontsize",Q).click(O))}p(P,"fontsize-picker",R)},tooltip:"Font Size"},color:{exec:function(Q){var P={r:255,g:255,b:255};var V=a("<div />");var T=r.options.colors?r.options.colors.split("|"):new Array(21);var U=[];var X=0;for(var S=0;S<T.length;++S){var O=(typeof T[S]!="undefined")?T[S].split(","):new Array(21);U[X++]='<div class="sceditor-color-column">';for(var W=0;W<O.length;++W){var R=(typeof O[W]!="undefined")?O[W]:"#"+P.r.toString(16)+P.g.toString(16)+P.b.toString(16);U[X++]='<a href="#" class="sceditor-color-option" style="background-color: '+R+'" data-color="'+R+'"></a>';if(W%5===0){P={r:P.r,g:P.g-51,b:255}}else{P={r:P.r,g:P.g,b:P.b-51}}}U[X++]="</div>";if(S%5===0){P={r:P.r-51,g:255,b:255}}else{P={r:P.r,g:255,b:255}}}V.append(U.join("")).find("a").click(function(Y){r.execCommand("forecolor",a(this).attr("data-color"));n();r.focus();Y.preventDefault()});p(Q,"color-picker",V)},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser dose not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser dose not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser dose not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(O){var P=a('<form><div><label for="txt">Paste your text inside the followingbox:</label> <textarea cols="20" rows="7" id="txt"></textarea></div></form>').submit(function(){return false});P.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(Q){K(a(this).parent("form").find("#txt").val());n();r.focus();Q.preventDefault()}));p(O,"pastetext",P)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},undo:{exec:"undo",tooltip:"Undo"},redo:{exec:"redo",tooltip:"Redo"},table:{exec:function(O){var P=a('<form><div><label for="rows">Rows:</label><input type="text" id="rows" value="2" /></div><div><label for="cols">Cols:</label><input type="text" id="cols" value="2" /></div></form>').submit(function(){return false});P.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(U){var S=a(this).parent("form").find("#rows").val()-0;var T=a(this).parent("form").find("#cols").val()-0;var R="<table>";for(var V=0;V<S;V++){R+="<tr>";for(var Q=0;Q<T;Q++){if(a.browser.msie){R+="<td></td>"}else{R+='<td><br class="sceditor-ignore" /></td>'}}R+="</tr>"}R+="</table>";L(R);n();r.focus();U.preventDefault()}));p(O,"inserttable",P)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(O){L("<code>","<br /></code>")},tooltip:"Code"},image:{exec:function(O){var P=a('<form><div><label for="link">URL:</label> <input type="text" id="image" value="http://" /></div><div><label for="width">Width (optional):</label> <input type="text" id="width" size="2" /></div><div><label for="height">Height (optional):</label> <input type="text" id="height" size="2" /></div></form>').submit(function(){return false});P.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(U){var R=a(this).parent("form");var V=R.find("#image").val();var S="";var T,Q;if((T=R.find("#width").val())!==""){S+=' width="'+T+'"'}if((Q=R.find("#height").val())!==""){S+=' height="'+Q+'"'}if(V!==""&&V!=="http://"){L("<img"+S+' src="'+V+'" />')}n();r.focus();U.preventDefault()}));p(O,"insertimage",P)},tooltip:"Insert an image"},email:{exec:function(O){var P=a('<form><div><label for="email">E-mail:</label> <input type="text" id="email" value="" /></div></form>').submit(function(){return false});P.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(Q){var R=a(this).parent("form").find("#email").val();if(R!==""){r.focus();if(r.getWysiwygSelectedHtml()==""){L('<a href="mailto:'+R+'">'+R+"</a>")}else{r.execCommand("createlink","mailto:"+R)}}n();r.focus();Q.preventDefault()}));p(O,"insertemail",P)},tooltip:"Insert an email"},link:{exec:function(O){var P=a('<form><div><label for="link">URL:</label> <input type="text" id="link" value="http://" /></div></form>').submit(function(){return false});P.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(Q){var R=a(this).parent("form").find("#link").val();if(R!==""&&R!=="http://"){r.focus();if(r.getWysiwygSelectedHtml()==""){L('<a href="'+R+'">'+R+"</a>")}else{r.execCommand("createlink",R)}}n();r.focus();Q.preventDefault()}));p(O,"insertlink",P)},tooltip:"Insert a link"},unlink:{exec:"unlink",tooltip:"Unlink"},quote:{exec:function(O,P){if(P){L("<blockquote>"+P+"</blockquote>")}else{L("<blockquote>","<br /></blockquote>")}},tooltip:"Insert a Quote"},emoticon:{exec:function(Q){var S=a("<div />");var O=a("<div />");var P=function(U,T){O.append(a("<img />").attr({src:T,alt:U}).click(function(V){L('<img src="'+a(this).attr("src")+'" data-sceditor-emoticon="'+a(this).attr("alt")+'" />');n();r.focus();V.preventDefault()}));if(O.children().length>3){S.append(O);O=a("<div />")}};a.each(r.options.emoticons.dropdown,P);if(O.children().length>0){S.append(O)}if(typeof r.options.emoticons.more!=="undefined"){var R=a('<a class="sceditor-more">More</a>').click(function(){var T=a.extend({},r.options.emoticons.dropdown,r.options.emoticons.more);S=a("<div />");O=a("<div />");a.each(T,P);if(O.children().length>0){S.append(O)}p(Q,"insertemoticon",S)});S.append(R)}p(Q,"insertemoticon",S)},keyPress:function(Q){var O=null,R=-1;if(y.contentWindow&&y.contentWindow.getSelection){O=y.contentWindow.getSelection().getRangeAt(0)}if(O==null||!O.startContainer){return}if(l===null){l=a.extend({},r.options.emoticons.more,r.options.emoticons.dropdown,r.options.emoticons.hidden)}if(s===null){s=0;a.each(l,function(T,S){if(T.length>s){s=T.length}})}var P=O.startContainer.textContent.substr(0,O.startOffset)+String.fromCharCode(Q.which)+O.startContainer.textContent.substr(O.startOffset,s);a.each(l,function(T,S){if((R=P.indexOf(T))>-1){O=O.cloneRange();O.setStart(O.startContainer,R);O.setEnd(O.startContainer,R+(T.length-1));O.deleteContents();var U=A().createElement("div");U.innerHTML='<img src="'+S+'" data-sceditor-emoticon="'+T+'" />';U=U.children[0];O.insertNode(U);O=O.cloneRange();O.setStartAfter(U);y.contentWindow.getSelection().removeAllRanges();y.contentWindow.getSelection().addRange(O);Q.preventDefault();Q.stopPropagation();return false}})},tooltip:"Insert an emoticon"},youtube:{exec:function(O){var P=a('<form><div><label for="link">Video URL:</label> <input type="text" id="link" value="http://" /></div></form>').submit(function(){return false});P.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(Q){var R=a(this).parent("form").find("#link").val();if(R!==""&&R!=="http://"){R=R.replace(/^[^v]+v.(.{11}).*/,"$1");L('<iframe width="560" height="315" src="http://www.youtube.com/embed/'+R+'" data-youtube-id="'+R+'" frameborder="0" allowfullscreen></iframe>')}n();r.focus();Q.preventDefault()}));p(O,"insertlink",P)},tooltip:"Insert a YouTube video"},date:{exec:function(Q){var P=new Date();var R=P.getYear();var S=P.getMonth();var O=P.getDate();if(R<2000){R=1900+R}if(S<10){S="0"+S}if(O<10){O="0"+O}L("<span>"+R+"-"+S+"-"+O+"</span>")},tooltip:"Insert current date"},time:{exec:function(Q){var P=new Date();var O=P.getHours();var S=P.getMinutes();var R=P.getSeconds();if(O<10){O="0"+O}if(S<10){S="0"+S}if(R<10){R="0"+R}L("<span>"+O+":"+S+":"+R+"</span>")},tooltip:"Insert current time"},print:{exec:"print",tooltip:"Print"},source:{exec:function(O){r.toggleTextMode()},tooltip:"View source"}};I=function(){x.data("sceditor",r);r.options=a.extend({},a.sceditor.defaultOptions,w);if(r.options.height!==null){x.height(r.options.height)}if(r.options.width!==null){x.width(r.options.width)}if((r.options.height!==null&&r.options.height.indexOf("%"))||(r.options.width!==null&&r.options.width.indexOf("%"))){a(window).resize(t)}N=a('<div class="sceditor-container" />').width(x.outerWidth()).height(x.outerHeight());x.after(N);v();C();u();if(r.options.resizeEnabled){c()}x.parents("form").submit(r.updateFormTextareaValue);a(document).click(D);var O=x.hide().val();if(r.options.getTextHandler){O=r.options.getTextHandler(O)}r.setWysiwygEditorValue(O);k()};C=function(){q=a("<textarea></textarea>").hide();G=a('<iframe frameborder="0"></iframe>');if(window.location.protocol==="https:"){G.attr("src","javascript:false")}N.append(G).append(q);y=G[0];H(x.width());F(x.height());A().designMode="On";A().open();A().write('<html><head><link rel="stylesheet" type="text/css" href="'+r.options.style+'" /></head><body></body></html>');A().close();a(A()).find("body").keypress(m);a(A()).keypress(m);a(A()).mousedown(d);a(A()).bind("beforedeactivate keypress",M)};v=function(){var Q=function(V){e(a(this),r.commands[a(this).data("sceditor-command")]);V.preventDefault()};f=a('<div class="sceditor-toolbar" />');var P=r.options.toolbar.split("|");for(var S=0;S<P.length;S++){var U=a('<div class="sceditor-group" />');var T=P[S].split(",");for(var O=0;O<T.length;O++){if(!r.commands.hasOwnProperty(T[O])){continue}var R=a('<a class="sceditor-button sceditor-button-'+T[O]+' " unselectable="on"><div unselectable="on" /></a>');if(r.commands[T[O]].hasOwnProperty("tooltip")){R.attr("title",r.commands[T[O]].tooltip)}R.data("sceditor-command",T[O]);R.click(Q);U.append(R)}f.append(U)}if(r.options.toolbarContainer===null){N.append(f)}else{a(r.options.toolbarContainer).append(f)}};u=function(){a.each(r.commands,function(P,O){if(typeof O.keyPress!="undefined"){z.push(O.keyPress)}})};var H=function(O){N.width(O);G.width(O);G.width(O+(O-G.outerWidth(true)));q.width(O);q.width(O+(O-q.outerWidth(true)))};var F=function(O){N.height(O);O=O-(r.options.toolbarContainer===null?f.outerHeight():0);G.height(O);G.height(O+(O-G.outerHeight(true)));q.height(O);q.height(O+(O-q.outerHeight(true)))};c=function(){var Q=a('<div class="sceditor-grip" />'),ab=a('<div class="sceditor-resize-cover" />'),T=0,R=0,S=0,Z=0,Y=N.width(),aa=N.height(),W=false,X,V,O,U,P;X=(r.options.resizeMinHeight==null?aa/2:r.options.resizeMinHeight);V=(r.options.resizeMaxHeight==null?aa*2:r.options.resizeMaxHeight);O=(r.options.resizeMinWidth==null?Y/2:r.options.resizeMinWidth);U=(r.options.resizeMaxWidth==null?Y*2:r.options.resizeMaxWidth);P=function(ae){var ac=Z+(ae.pageY-R);var ad=S+(ae.pageX-T);if(ad>=O&&(O<0||ad<=U)){H(ad)}if(ac>=X&&(V<0||ac<=V)){F(ac)}ae.preventDefault()};N.append(Q);N.append(ab.hide());Q.mousedown(function(ac){T=ac.pageX;R=ac.pageY;S=N.width();Z=N.height();W=true;ab.show();a(document).bind("mousemove",P);ac.preventDefault()});a(document).mouseup(function(ac){if(!W){return}W=false;ab.hide();a(document).unbind("mousemove",P);ac.preventDefault()})};k=function(){var O=a.extend({},r.options.emoticons.more,r.options.emoticons.dropdown,r.options.emoticons.hidden);a.each(O,function(R,P){var Q=document.createElement("img");Q.src=P;b.push(Q)})};p=function(O,Q,P){if(o!==null){n()}o=a('<div class="sceditor-dropdown sceditor-'+Q+'" />').css({top:O.offset().top,left:O.offset().left}).append(P);N.after(o);B=true;o.click(function(R){R.stopPropagation()})};D=function(){if(!B){n()}B=false};n=function(){if(o!==null){o.remove();o=null}};A=function(){if(y.contentDocument){return y.contentDocument}if(y.contentWindow&&y.contentWindow.document){return y.contentWindow.document}if(y.document){return y.document}return null};L=function(P,R){r.focus();if(a(j()).is("code")||a(j()).parents("code").length!==0){return}if(typeof R!=="undefined"){P=P+r.getWysiwygSelectedHtml()+R}if(A().getSelection){var O=h();var Q=A().createElement("div");Q.innerHTML=P;Q=Q.children[0];O.deleteContents();O.insertNode(Q);O=O.cloneRange();if(Q.parentNode!==O.startContainer||!a.browser.opera){O.setStartAfter(Q)}else{return}y.contentWindow.getSelection().removeAllRanges();y.contentWindow.getSelection().addRange(O)}else{if(A().selection&&A().selection.createRange){A().selection.createRange().pasteHTML(P)}else{r.execCommand("insertHtml",P)}}E=null};K=function(O){O=O.replace(/&/g,"&amp;");O=O.replace(/</g,"&lt;");O=O.replace(/>/g,"&gt;");O=O.replace(/ /g,"&nbsp;");O=O.replace(/\r\n|\r/g,"\n");O=O.replace(/\n/g,"<br />");L(O)};h=function(){var O;if(y.contentWindow&&y.contentWindow.getSelection){O=y.contentWindow.getSelection()}else{if(A().selection){O=A().selection}}if(O.getRangeAt){return O.getRangeAt(0)}else{if(O.createRange){return O.createRange()}}return null};r.getWysiwygSelectedHtml=function(){var P=h();if(P===null){return""}if(document.selection&&document.selection.createRange){if(P.text===""){return""}if(typeof P.htmlText!=="undefined"){return P.htmlText}}if(window.XMLSerializer){var O="";a(P.cloneContents().childNodes).each(function(){O+=new XMLSerializer().serializeToString(this)});return O}};j=function(){var O=h();if(O===null){return null}if(window.getSelection&&typeof O.commonAncestorContainer!=="undefined"){return O.commonAncestorContainer}if(document.selection&&document.selection.createRange){return O.parentElement()}};r.getWysiwygEditorValue=function(P){var O=G.contents().find("body").html();if(P!==false&&r.options.getHtmlHandler){O=r.options.getHtmlHandler(O,G.contents().find("body"))}return O};r.getTextareaValue=function(O){var P=q.val();if(O!==false&&r.options.getTextHandler){P=r.options.getTextHandler(P)}return P};r.setWysiwygEditorValue=function(O){A().body.innerHTML=i(O)};r.setTextareaValue=function(O){q.val(O)};r.updateFormTextareaValue=function(){if(q.is(":visible")){x.val(r.getTextareaValue(false))}else{x.val(r.getWysiwygEditorValue())}};i=function(O){var P=a.extend({},r.options.emoticons.more,r.options.emoticons.dropdown,r.options.emoticons.hidden);a.each(P,function(R,Q){var S=R.replace(/[\$\?\[\]\.\*\(\)\|]/g,"\\$&").replace("<","&lt;").replace(">","&gt;")+"(?=([^\\<\\>]*?<(?!/code)|[^\\<\\>]*?$))";O=O.replace(new RegExp(S,"g"),'<img src="'+Q+'" data-sceditor-emoticon="'+R+'" />')});return O};r.toggleTextMode=function(){if(q.is(":visible")){r.setWysiwygEditorValue(r.getTextareaValue())}else{r.setTextareaValue(r.getWysiwygEditorValue())}E=null;q.toggle();G.toggle()};e=function(O,P){if(!P.hasOwnProperty("exec")){return}if(a.isFunction(P.exec)){P.exec(O)}else{r.execCommand(P.exec,P.hasOwnProperty("execParam")?P.execParam:null)}};r.focus=function(){y.contentWindow.focus();if(E!==null){if(window.document.createRange){window.getSelection().addRange(E)}else{if(window.document.selection){E.select()}}}};M=function(){if(!a.browser.msie){return}E=h()};r.execCommand=function(R,Q){var O=false;r.focus();if(a(j()).is("code")||a(j()).parents("code").length!==0){return}if(A()){try{O=A().execCommand(R,false,Q)}catch(P){}}if(!O&&typeof r.commands[R]!="undefined"&&typeof r.commands[R].errorMessage!="undefined"){alert(r.commands[R].errorMessage)}};m=function(P){n();if(a(j()).is("code")||a(j()).parents("code").length!==0){return}var O=z.length;while(O--){z[O](P)}};d=function(O){n()};t=function(){if(r.options.height!==null&&r.options.height.indexOf("%")){F(N.parent().height()*(parseFloat(r.options.height)/100))}if(r.options.width!==null&&r.options.width.indexOf("%")){H(N.parent().width()*(parseFloat(r.options.width)/100))}};I()};a.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|undo,redo|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|print,source",style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:true,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,getHtmlHandler:null,getTextHandler:null,toolbarContainer:null};a.fn.sceditor=function(b){return this.each(function(){(new a.sceditor(this,b))})}})(jQuery);(function(a){a.sceditorBBCodePlugin=function(e,m){var c=this;var l,g,h,i,d,k,f;c.bbcodes={b:{styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},left:{styles:{"text-align":["left"]},format:"[left]{0}[/left]",html:'<div style="text-align: left">{0}</div>'},center:{styles:{"text-align":["center"]},format:"[center]{0}[/center]",html:'<div style="text-align: center">{0}</div>'},right:{styles:{"text-align":["right"]},format:"[right]{0}[/right]",html:'<div style="text-align: right">{0}</div>'},justify:{styles:{"text-align":["justify"]},format:"[justify]{0}[/justify]",html:'<div style="text-align: justify">{0}</div>'},font:{styles:{"font-family":null},format:function(n,o){if(n.css("font-family")==c.options.defaultFont){return o}return"[font="+f(n.css("font-family"))+"]"+o+"[/font]"},html:function(o,n,p){return'<font face="'+n.defaultAttr+'">'+p+"</font>"}},size:{styles:{"font-size":null},format:function(o,p){var q=o.css("fontSize");var n=1;if(q==c.options.defaultSize){return p}if(q.indexOf("px")>-1){q=q.replace("px","")-0;if(q>12){n=2}if(q>15){n=3}if(q>17){n=4}if(q>23){n=5}if(q>31){n=6}if(q>47){n=7}}else{n=q}return"[size="+n+"]"+p+"[/size]"},html:function(o,n,p){return'<font size="'+n.defaultAttr+'">'+p+"</font>"}},color:{styles:{color:null},format:function(o,p){var n=g(o.css("color"));if(n==c.options.defaultColor){return p}return"[color="+n+"]"+p+"[/color]"},html:function(o,n,p){return'<font color="'+n.defaultAttr+'">'+p+"</font>"}},ul:{tags:{ul:null},format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{html:"<ul>{0}</ul>"},ol:{tags:{ol:null},format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{html:"<li>{0}</li>"},table:{tags:{table:null},format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},format:"[td]{0}[/td]",html:'<td>{0}<br class="sceditor-ignore" /></td>'},emoticon:{tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(n,o){return n.attr("data-sceditor-emoticon")+o},html:"{0}"},horizontalrule:{tags:{hr:null},format:"[hr]{0}",html:"<hr />"},img:{tags:{img:{src:null}},format:function(n,o){if(typeof n.attr("data-sceditor-emoticon")!="undefined"){return o}var p="="+a(n).width()+"x"+a(n).height();return"[img"+p+"]"+n.attr("src")+"[/img]"},html:function(o,n,p){var r="";if(typeof n.width!="undefined"){r+=' width="'+n.width+'"'}if(typeof n.height!="undefined"){r+=' height="'+n.height+'"'}if(typeof n.defaultAttr!=="undefined"){var q=n.defaultAttr.split(/x/i);r=' width="'+q[0]+'" height="'+(q.length===2?q[1]:q[0])+'"'}return"<img "+r+' src="'+p+'" />'}},url:{tags:{a:{href:null}},format:function(n,o){if(n.attr("href").substr(0,7)=="mailto:"){return"[email="+n.attr("href").substr(7)+"]"+o+"[/email]"}return"[url="+encodeURI(n.attr("href"))+"]"+o+"[/url]"},html:function(o,n,p){if(typeof n.defaultAttr==="undefined"){n.defaultAttr=p}return'<a href="'+n.defaultAttr+'">'+p+"</a>"}},email:{html:function(o,n,p){if(typeof n.defaultAttr==="undefined"){n.defaultAttr=p}return'<a href="mailto:'+n.defaultAttr+'">'+p+"</a>"}},quote:{tags:{blockquote:null},format:function(o,p){var n="";if(a(o).children("cite:first").length==1){n="="+a(o).children("cite:first").text();p="";a(o).children("cite:first").remove();a(o).contents().each(function(){p+=k(a(this))})}return"[quote"+n+"]"+p+"[/quote]"},html:function(o,n,p){if(typeof n.defaultAttr!=="undefined"){p="<cite>"+n.defaultAttr+"</cite>"+p}return"<blockquote>"+p+"</blockquote>"}},code:{tags:{code:null},format:"[code]{0}[/code]",html:"<code>{0}</code>"},youtube:{tags:{iframe:{"data-youtube-id":null}},format:function(n,o){if(!n.attr("data-youtube-id")){return o}return"[youtube]"+n.attr("data-youtube-id")+"[/youtube]"},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'}};var j={};var b={};l=function(){c.options=a.extend({},a.sceditor.defaultOptions,a.sceditorBBCodePlugin.defaultOptions,m);c.buildBbcodeCache();(new a.sceditor(e,a.extend({},c.options,{getHtmlHandler:c.getHtmlHandler,getTextHandler:c.getTextHandler})))};g=function(p){var o;function n(q){q=parseInt(q,10);if(isNaN(q)){return"00"}q=Math.max(0,Math.min(q,255)).toString(16);return q.length<2?"0"+q:q}if((o=p.match(/rgb\((\d+),\s*?(\d+),\s*?(\d+)\)/i))){return"#"+n(o[1])+n(o[2]-0)+n(o[3]-0)}return p};c.buildBbcodeCache=function(){a.each(c.bbcodes,function(n,o){if(typeof c.bbcodes[n].tags!=="undefined"){a.each(c.bbcodes[n].tags,function(p,q){j[p]=(j[p]||{});j[p][n]=q})}if(typeof c.bbcodes[n].styles!=="undefined"){a.each(c.bbcodes[n].styles,function(q,p){b[q]=(b[q]||{});b[q][n]=p})}})};h=function(o,p){var n;a.each(b,function(r,q){if(o.get(0).nodeName.toLowerCase()==="a"&&(r==="color"||r==="text-decoration")){return}else{if(o.get(0).nodeName.toLowerCase()==="code"&&(r==="font-family")){return}}n=o.css(r);if(o.parent().css(r)==n){return}a.each(q,function(t,s){if(s===null||a.inArray(n.toString(),s)>-1){if(a.isFunction(c.bbcodes[t].format)){p=c.bbcodes[t].format(o,p)}else{p=d(c.bbcodes[t].format,p)}}})});return p};i=function(o,p){var n=o.get(0).nodeName.toLowerCase();if(typeof j[n]!=="undefined"){a.each(j[n],function(r,s){if(s!==null){var q=false;a.each(s,function(u,t){if(typeof o.attr(u)==="undefined"){return}if(t!==null&&a.inArray(o.attr(u),t)<0){return}q=true;return false});if(!q){return}}if(a.isFunction(c.bbcodes[r].format)){p=c.bbcodes[r].format(o,p)}else{p=d(c.bbcodes[r].format,p)}})}if(n==="br"||n==="div"||n==="p"){p+="\n"}return p};d=function(){var n=arguments;return n[0].replace(/\{(\d+)\}/g,function(p,o){return typeof n[0-o+1]!="undefined"?n[0-o+1]:"{"+o+"}"})};f=function(n){return n.replace(/^["']+/,"").replace(/["']+$/,"")};c.getHtmlHandler=function(n,o){return k(a(o))};k=function(o){var n="";if(typeof o.get(0)==="undefined"){return""}if(o.get(0).nodeName.toLowerCase()!=="iframe"){if(o.get(0).nodeType===3){return o.get(0).nodeValue}else{if(o.is("code")){n=o.text()}else{if(o.contents().length>0){a.each(o.contents(),function(){n+=k(a(this))})}}}}if(!o.is("code")){n=h(o,n)}n=i(o,n);return n};c.getTextHandler=function(r){var q=/\[([^\[\s=]*?)(?:([^\[]*?))?\]((?:[\s\S(?!=\[\\\1)](?!\[\1))*?)\[\/(\1)\]/g;var o=/(\S+)=((?:(?:(["'])(?:\\\3|[^\3])*?\3))|(?:[^'"\s]+))/g;var n;var p=function(x,t,s,v){var u={};if(typeof s!=="undefined"){var w;s=a.trim(s);if((s.charAt(0)=="="&&(s.split("=").length-1)<=1)||t==="url"){u.defaultAttr=f(s.substr(1))}else{if(s.charAt(0)==="="){s="defaultAttr"+s}while((w=o.exec(s))){u[w[1].toLowerCase()]=f(w[2])}}}if(typeof c.bbcodes[t]==="undefined"){return x}if(typeof c.bbcodes[t].html==="function"){return c.bbcodes[t].html(t,u,v)}else{return d(c.bbcodes[t].html,v)}};r=r.replace(/&/g,"&amp;");r=r.replace(/</g,"&lt;");r=r.replace(/>/g,"&gt;");r=r.replace(/\r/g,"");r=r.replace(/(\[\/?(?:left|center|right|justify)\])\n/g,"$1");r=r.replace(/\n/g,"<span><br /></span>");while(r!==n){n=r;r=r.replace(q,p)}r=r.replace(/\[hr\]/gi,"<hr>");return r.replace(/ {2}(?=([^<\>]*?<|[^<\>]*?$))/g," &nbsp;")};l()};a.sceditorBBCodePlugin.defaultOptions={defaultSize:13,defaultColor:"#111111",defaultFont:"Verdana, Arial, Helvetica, sans-serif"};a.fn.sceditorBBCodePlugin=function(b){return this.each(function(){(new a.sceditorBBCodePlugin(this,b))})}})(jQuery);