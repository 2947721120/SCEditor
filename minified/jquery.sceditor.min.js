(function(c){c.sceditor=function(d,b){var a=this,f=c(d),e=null,i=null,g=null,h=null,j=null,k=null,m=!1,r=[],n=null,q=null,I=[],o,p,w,x,y,v,z,A,B,C,D,E,F,l,G,t,u,H,s;a.commands=c.sceditor.commands;A=function(){j=c("<textarea></textarea>").hide();g=c('<iframe frameborder="0"></iframe>');"https:"===window.location.protocol&&g.attr("src","javascript:false");e.append(g).append(j);h=g[0];u(f.width());t(f.height());l().designMode="On";l().open();l().write('<html><head><link rel="stylesheet" type="text/css" href="'+
a.options.style+'" /></head><body></body></html>');l().close();l().designMode="On";c(l()).find("body").keypress(v);c(l()).keypress(v);c(l()).mousedown(z);c(l()).bind("beforedeactivate keypress",y)};B=function(){var b=function(b){x(c(this),a.commands[c(this).data("sceditor-command")]);b.preventDefault()};i=c('<div class="sceditor-toolbar" />');for(var d=a.options.toolbar.split("|"),k=0;k<d.length;k++){for(var f=c('<div class="sceditor-group" />'),m=d[k].split(","),g=0;g<m.length;g++)if(a.commands.hasOwnProperty(m[g])){var h=
c('<a class="sceditor-button sceditor-button-'+m[g]+' " unselectable="on"><div unselectable="on" /></a>');a.commands[m[g]].hasOwnProperty("tooltip")&&h.attr("title",a._(a.commands[m[g]].tooltip));a.commands[m[g]].exec?h.data("sceditor-wysiwygmode",!0):h.addClass("disabled");a.commands[m[g]].txtExec&&h.data("sceditor-txtmode",!0);h.data("sceditor-command",m[g]);h.click(b);f.append(h)}i.append(f)}null===a.options.toolbarContainer?e.append(i):c(a.options.toolbarContainer).append(i)};C=function(){c.each(a.commands,
function(a,c){"undefined"!==typeof c.keyPress&&r.push(c.keyPress)})};u=function(a){e.width(a);g.width(a);g.width(a+(a-g.outerWidth(!0)));j.width(a);j.width(a+(a-j.outerWidth(!0)))};t=function(c){e.height(c);c-=null===a.options.toolbarContainer?i.outerHeight():0;g.height(c);g.height(c+(c-g.outerHeight(!0)));j.height(c);j.height(c+(c-j.outerHeight(!0)))};D=function(){var b=c('<div class="sceditor-grip" />'),d=c('<div class="sceditor-resize-cover" />'),k=0,f=0,m=0,g=0,h=e.width(),i=e.height(),j=!1,r,
n,o,l,p;r=null==a.options.resizeMinHeight?i/2:a.options.resizeMinHeight;n=null==a.options.resizeMaxHeight?2*i:a.options.resizeMaxHeight;o=null==a.options.resizeMinWidth?h/2:a.options.resizeMinWidth;l=null==a.options.resizeMaxWidth?2*h:a.options.resizeMaxWidth;p=function(a){var c=g+(a.pageY-f),b=m+(a.pageX-k);b>=o&&(0>l||b<=l)&&u(b);c>=r&&(0>n||c<=n)&&t(c);a.preventDefault()};e.append(b);e.append(d.hide());b.mousedown(function(a){k=a.pageX;f=a.pageY;m=e.width();g=e.height();j=!0;d.show();c(document).bind("mousemove",
p);a.preventDefault()});c(document).mouseup(function(a){j&&(j=!1,d.hide(),c(document).unbind("mousemove",p),a.preventDefault())})};F=function(){var b=c.extend({},a.options.emoticons.more,a.options.emoticons.dropdown,a.options.emoticons.hidden);c.each(b,function(a,c){var b=document.createElement("img");b.src=c;I.push(b)})};a.createDropDown=function(b,d,e,f){a.closeDropDown();!1!==f&&(e=c(e),e.find(":not(input,textarea)").filter(function(){return 1===this.nodeType}).attr("unselectable","on"));k=c('<div class="sceditor-dropdown sceditor-'+
d+'" />').css({top:b.offset().top,left:b.offset().left}).append(e);k.appendTo(c("body"));m=!0;k.click(function(a){a.stopPropagation()})};E=function(c){!m&&3!==c.which&&a.closeDropDown();m=!1};a.closeDropDown=function(c){null!==k&&(k.remove(),k=null);!0===c&&a.focus()};l=function(){return h.contentDocument?h.contentDocument:h.contentWindow&&h.contentWindow.document?h.contentWindow.document:h.document?h.document:null};a.wysiwygEditorInsertHtml=function(b,d,e){a.focus();if(e||!(c(o()).is("code")||0!==
c(o()).parents("code").length)){"undefined"!==typeof d&&null!==d&&(b=b+a.getWysiwygSelectedHtml()+d);if(l().getSelection){d=p();e=l().createElement("div");e.innerHTML=b;e=e.children[0];d.deleteContents();d.insertNode(e);d=d.cloneRange();if(e.parentNode!==d.startContainer||!c.browser.opera)d.setStartAfter(e);else return;h.contentWindow.getSelection().removeAllRanges();h.contentWindow.getSelection().addRange(d)}else l().selection&&l().selection.createRange?l().selection.createRange().pasteHTML(b):a.execCommand("insertHtml",
b);n=null}};a.wysiwygEditorInsertText=function(c){c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\r\n|\r/g,"\n").replace(/\n/g,"<br />");a.wysiwygEditorInsertHtml("<span>"+c+"</span>")};p=function(){var a;h.contentWindow&&h.contentWindow.getSelection?a=h.contentWindow.getSelection():l().selection&&(a=l().selection);a.getRangeAt&&0>=a.rangeCount&&a.addRange(l().createRange());return a.getRangeAt?a.getRangeAt(0):a.createRange?a.createRange():null};
a.getWysiwygSelectedHtml=function(){var a=p();if(null===a)return"";if(document.selection&&document.selection.createRange){if(""===a.text)return"";if("undefined"!==typeof a.htmlText)return a.htmlText}if(window.XMLSerializer){var b="";c(a.cloneContents().childNodes).each(function(){b+=(new XMLSerializer).serializeToString(this)});return b}};o=function(){var a=p();if(null===a)return null;if(window.getSelection&&"undefined"!==typeof a.commonAncestorContainer)return a.commonAncestorContainer;if(document.selection&&
document.selection.createRange)return a.parentElement()};a.getWysiwygEditorValue=function(c){var b=g.contents().find("body").html();!1!==c&&a.options.getHtmlHandler&&(b=a.options.getHtmlHandler(b,g.contents().find("body")));return b};a.getTextareaValue=function(c){var b=j.val();!1!==c&&a.options.getTextHandler&&(b=a.options.getTextHandler(b));return b};a.setWysiwygEditorValue=function(a){l().body.innerHTML=w(a)};a.setTextareaValue=function(a){j.val(a)};a.updateTextareaValue=function(){s()?f.val(a.getTextareaValue(!1)):
f.val(a.getWysiwygEditorValue())};w=function(b){var d=c.extend({},a.options.emoticons.more,a.options.emoticons.dropdown,a.options.emoticons.hidden);c.each(d,function(c,d){var e=a.regexEscape(c)+"(?=([^\\<\\>]*?<(?!/code)|[^\\<\\>]*?$))",k="";a.options.emoticonsCompat&&(e="((>|^|\\s){1})"+e+"(?=(\\s|$|<){1})",k="$1");b=b.replace(RegExp(e,"gm"),k+'<img src="'+d+'" data-sceditor-emoticon="'+c+'" />')});return b};a.regexEscape=function(a){return a.replace(/[\$\?\[\]\.\*\(\)\|]/g,"\\$&").replace("<","&lt;").replace(">",
"&gt;")};s=function(){return j.is(":visible")};a.toggleTextMode=function(){s()?a.setWysiwygEditorValue(a.getTextareaValue()):a.setTextareaValue(a.getWysiwygEditorValue());i.find(".sceditor-button").removeClass("disabled");n=null;j.toggle();g.toggle();i.find(".sceditor-button").each(function(){var a=c(this);s()&&!a.data("sceditor-txtmode")?a.addClass("disabled"):!s()&&!a.data("sceditor-wysiwygmode")&&a.addClass("disabled")})};x=function(b,d){s()?d.hasOwnProperty("txtExec")&&d.txtExec.call(a,b):d.hasOwnProperty("exec")&&
(c.isFunction(d.exec)?d.exec.call(a,b):a.execCommand(d.exec,d.hasOwnProperty("execParam")?d.execParam:null))};a.focus=function(){h.contentWindow.focus();null!==n&&(window.document.createRange?window.getSelection().addRange(n):window.document.selection&&n.select())};y=function(){c.browser.msie&&(n=p())};a.execCommand=function(b,d){var e=!1;a.focus();if(!(c(o()).is("code")||0!==c(o()).parents("code").length)){if(l())try{e=l().execCommand(b,!1,d)}catch(k){}!e&&"undefined"!==typeof a.commands[b]&&"undefined"!==
typeof a.commands[b].errorMessage&&alert(a._(a.commands[b].errorMessage))}};v=function(b){a.closeDropDown();if(13==b.which&&(c(o()).is("code, blockquote")||0!==c(o()).parents("code, blockquote").length))return a.wysiwygEditorInsertHtml("<br />",null,!0),!1;if(!(c(o()).is("code")||0!==c(o()).parents("code").length))for(var d=r.length;d--;)r[d].call(a,b,h,j)};z=function(){a.closeDropDown()};G=function(){null!==a.options.height&&-1<a.options.height.toString().indexOf("%")&&t(e.parent().height()*(parseFloat(a.options.height)/
100));null!==a.options.width&&-1<a.options.width.toString().indexOf("%")&&u(e.parent().width()*(parseFloat(a.options.width)/100))};a._=function(){var a=arguments;null!==q&&q[a[0]]&&(a[0]=q[a[0]]);return a[0].replace(/\{(\d+)\}/g,function(b,c){return"undefined"!=typeof a[c-0+1]?a[c-0+1]:"{"+c+"}"})};H=function(){if(c.sceditor.locale[a.options.locale])q=c.sceditor.locale[a.options.locale];else{var b=a.options.locale.split("-");c.sceditor.locale[b[0]]&&(q=c.sceditor.locale[b[0]])}null!==q&&q.dateFormat&&
(a.options.dateFormat=q.dateFormat)};(function(){f.data("sceditor",a);a.options=c.extend({},c.sceditor.defaultOptions,b);null!==a.options.locale&&"en"!==a.options.locale&&H();null!==a.options.height&&f.height(a.options.height);null!==a.options.width&&f.width(a.options.width);(null!==a.options.height&&-1<a.options.height.toString().indexOf("%")||null!==a.options.width&&-1<a.options.width.toString().indexOf("%"))&&c(window).resize(G);e=c('<div class="sceditor-container" />').width(f.outerWidth()).height(f.outerHeight());
f.after(e);B();A();C();a.options.resizeEnabled&&D();f.parents("form").submit(a.updateTextareaValue);c(document).click(E);var d=f.hide().val();a.options.getTextHandler&&(d=a.options.getTextHandler(d));a.setWysiwygEditorValue(d);F()})()};c.sceditor.locale={};c.sceditor.commands={bold:{exec:"bold",tooltip:"Bold"},italic:{exec:"italic",tooltip:"Italic"},underline:{exec:"underline",tooltip:"Underline"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},
superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{exec:function(d){for(var b=this,a=b.options.fonts.split(","),f=c("<div />"),e=function(a){b.execCommand("fontname",c(this).data("sceditor-font"));b.closeDropDown(!0);a.preventDefault()},i=0;i<a.length;i++)f.append(c('<a class="sceditor-font-option" href="#"><font face="'+
a[i]+'">'+a[i]+"</font></a>").data("sceditor-font",a[i]).click(e));b.createDropDown(d,"font-picker",f)},tooltip:"Font Name"},size:{exec:function(d){for(var b=this,a=c("<div />"),f=function(a){b.execCommand("fontsize",c(this).data("sceditor-fontsize"));b.closeDropDown(!0);a.preventDefault()},e=1;7>=e;e++)a.append(c('<a class="sceditor-fontsize-option" href="#"><font size="'+e+'">'+e+"</font></a>").data("sceditor-fontsize",e).click(f));b.createDropDown(d,"fontsize-picker",a)},tooltip:"Font Size"},color:{exec:function(d){for(var b=
this,a={r:255,g:255,b:255},f=c("<div />"),e=this.options.colors?this.options.colors.split("|"):Array(21),i=[],g=0,h=0;h<e.length;++h){var j="undefined"!==typeof e[h]?e[h].split(","):Array(21);i[g++]='<div class="sceditor-color-column">';for(var k=0;k<j.length;++k){var m="undefined"!==typeof j[k]?j[k]:"#"+a.r.toString(16)+a.g.toString(16)+a.b.toString(16);i[g++]='<a href="#" class="sceditor-color-option" style="background-color: '+m+'" data-color="'+m+'"></a>';a=0===k%5?{r:a.r,g:a.g-51,b:255}:{r:a.r,
g:a.g,b:a.b-51}}i[g++]="</div>";a=0===h%5?{r:a.r-51,g:255,b:255}:{r:a.r,g:255,b:255}}f.append(i.join("")).find("a").click(function(a){b.execCommand("forecolor",c(this).attr("data-color"));b.closeDropDown(!0);a.preventDefault()});b.createDropDown(d,"color-picker",f)},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",
tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(d){var b=this,a=c(this._('<form><div><label for="txt">{0}</label> <textarea cols="20" rows="7" id="txt"></textarea></div></form>',this._("Paste your text inside the following box:"))).submit(function(){return!1});
a.append(c(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){b.wysiwygEditorInsertText(c(this).parent("form").find("#txt").val());b.closeDropDown(!0);a.preventDefault()}));b.createDropDown(d,"pastetext",a)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},undo:{exec:"undo",tooltip:"Undo"},redo:{exec:"redo",tooltip:"Redo"},table:{exec:function(d){var b=
this,a=c(this._('<form><div><label for="rows">{0}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{1}</label><input type="text" id="cols" value="2" /></div></form>',this._("Rows:"),this._("Cols:"))).submit(function(){return!1});a.append(c(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){var d=c(this).parent("form").find("#rows").val()-0,i=c(this).parent("form").find("#cols").val()-0;if(!(1>d||1>i)){for(var g="<table>",
h=0;h<d;h++){for(var g=g+"<tr>",j=0;j<i;j++)g=c.browser.msie?g+"<td></td>":g+'<td><br class="sceditor-ignore" /></td>';g+="</tr>"}b.wysiwygEditorInsertHtml(g+"</table>");b.closeDropDown(!0);a.preventDefault()}}));b.createDropDown(d,"inserttable",a)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{exec:function(d){var b=this,a=c(this._('<form><div><label for="link">{0}</label> <input type="text" id="image" value="http://" /></div><div><label for="width">{1}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{2}</label> <input type="text" id="height" size="2" /></div></form>',
this._("URL:"),this._("Width (optional):"),this._("Height (optional):"))).submit(function(){return!1});a.append(c(this._('<div><input type="button" class="button" value="Insert" /></div>',this._("Insert"))).click(function(a){var d=c(this).parent("form"),i=d.find("#image").val(),g="",h;if(""!==(h=d.find("#width").val()))g+=' width="'+h+'"';if(""!==(d=d.find("#height").val()))g+=' height="'+d+'"';""!==i&&"http://"!==i&&b.wysiwygEditorInsertHtml("<img"+g+' src="'+i+'" />');b.closeDropDown(!0);a.preventDefault()}));
b.createDropDown(d,"insertimage",a)},tooltip:"Insert an image"},email:{exec:function(d){var b=this,a=c(this._('<form><div><label for="email">{0}</label> <input type="text" id="email" value="" /></div></form>',this._("E-mail:"))).submit(function(){return!1});a.append(c('<div><input type="button" class="button" value="Insert" /></div>').click(function(a){var d=c(this).parent("form").find("#email").val();""!==d&&(b.focus(),""==b.getWysiwygSelectedHtml()?b.wysiwygEditorInsertHtml('<a href="mailto:'+d+
'">'+d+"</a>"):b.execCommand("createlink","mailto:"+d));b.closeDropDown(!0);a.preventDefault()}));b.createDropDown(d,"insertemail",a)},tooltip:"Insert an email"},link:{exec:function(d){var b=this,a=c(this._('<form><div><label for="link">{0}</label> <input type="text" id="link" value="http://" /></div></form>',this._("URL:"))).submit(function(){return!1});a.append(c(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){var d=c(this).parent("form").find("#link").val();
""!==d&&"http://"!==d&&(b.focus(),""==b.getWysiwygSelectedHtml()?b.wysiwygEditorInsertHtml('<a href="'+d+'">'+d+"</a>"):b.execCommand("createlink",d));b.closeDropDown(!0);a.preventDefault()}));b.createDropDown(d,"insertlink",a)},tooltip:"Insert a link"},unlink:{exec:"unlink",tooltip:"Unlink"},quote:{exec:function(c,b){var a="<blockquote>",f="</blockquote>";b?(a=a+b+f,f=null):f="<br />"+f;this.wysiwygEditorInsertHtml(a,f)},tooltip:"Insert a Quote"},emoticon:{exec:function(d){var b=this,a=c("<div />"),
f=c("<div />"),e=function(d,e){f.append(c("<img />").attr({src:e,alt:d}).click(function(a){var d,e;b.options.emoticonsCompat&&(d="<span> ",e=" </span>");b.wysiwygEditorInsertHtml(d+'<img src="'+c(this).attr("src")+'" data-sceditor-emoticon="'+c(this).attr("alt")+'" />'+e);b.closeDropDown(!0);a.preventDefault()}));3<f.children().length&&(a.append(f),f=c("<div />"))};c.each(b.options.emoticons.dropdown,e);0<f.children().length&&a.append(f);if("undefined"!==typeof b.options.emoticons.more){var i=c(this._('<a class="sceditor-more">{0}</a>',
this._("More"))).click(function(){var g=c.extend({},b.options.emoticons.dropdown,b.options.emoticons.more);a=c("<div />");f=c("<div />");c.each(g,e);0<f.children().length&&a.append(f);b.createDropDown(d,"insertemoticon",a)});a.append(i)}b.createDropDown(d,"insertemoticon",a)},keyPress:function(d,b){var a=null,f=-1,e=this;b.contentWindow&&b.contentWindow.getSelection&&(a=b.contentWindow.getSelection().getRangeAt(0));if(null!=a&&a.startContainer){e.allEmoticonCache||(e.allEmoticonCache=c.extend({},
e.options.emoticons.more,e.options.emoticons.dropdown,e.options.emoticons.hidden));e.longestEmoticonCode||(e.longestEmoticonCode=0,c.each(e.allEmoticonCache,function(a){a.length>e.longestEmoticonCode&&(e.longestEmoticonCode=a.length)}),e.options.emoticonsCompat&&(e.longestEmoticonCode+=1));var i=String.fromCharCode(d.which),g=e.options.emoticonsCompat?/\s/.test(i):!1,h=a.startContainer.textContent.substr(0,a.startOffset),j=a.startContainer.textContent.substr(a.startOffset,e.longestEmoticonCode),k=
h+i+j;c.each(e.allEmoticonCache,function(c,h){if(-1<(f=k.indexOf(c,a.startOffset-c.length))){if(e.options.emoticonsCompat){var n=RegExp("(\\s{1})"+e.regexEscape(c)+"(?=\\s{1})","gm");if(g&&-1<(i+j).indexOf(c)||!n.test(k))return}a=a.cloneRange();a.setStart(a.startContainer,f);a.setEnd(a.startContainer,f+c.length-(g?0:1));a.deleteContents();n=b.contentDocument.createElement("div");n.innerHTML='<img src="'+h+'" data-sceditor-emoticon="'+c+'" />';n=n.children[0];a.insertNode(n);a=a.cloneRange();a.setStartAfter(n);
b.contentWindow.getSelection().removeAllRanges();b.contentWindow.getSelection().addRange(a);g||(d.preventDefault(),d.stopPropagation());return!1}})}},tooltip:"Insert an emoticon"},youtube:{exec:function(d){var b=this,a=c(this._('<form><div><label for="link">{0}</label> <input type="text" id="link" value="http://" /></div></form>',this._("Video URL:"))).submit(function(){return!1});a.append(c(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(a){var d=
c(this).parent("form").find("#link").val();""!==d&&"http://"!==d&&(d=d.replace(/^[^v]+v.(.{11}).*/,"$1"),b.wysiwygEditorInsertHtml('<iframe width="560" height="315" src="http://www.youtube.com/embed/'+d+'?wmode=opaque" data-youtube-id="'+d+'" frameborder="0" allowfullscreen></iframe>'));b.closeDropDown(!0);a.preventDefault()}));b.createDropDown(d,"insertlink",a)},tooltip:"Insert a YouTube video"},date:{exec:function(){var c=new Date,b=c.getYear(),a=c.getMonth()+1,c=c.getDate();2E3>b&&(b=1900+b);10>
a&&(a="0"+a);10>c&&(c="0"+c);this.wysiwygEditorInsertHtml("<span>"+this.options.dateFormat.replace(/year/i,b).replace(/month/i,a).replace(/day/i,c)+"</span>")},tooltip:"Insert current date"},time:{exec:function(){var c=new Date,b=c.getHours(),a=c.getMinutes(),c=c.getSeconds();10>b&&(b="0"+b);10>a&&(a="0"+a);10>c&&(c="0"+c);this.wysiwygEditorInsertHtml("<span>"+b+":"+a+":"+c+"</span>")},tooltip:"Insert current time"},print:{exec:"print",tooltip:"Print"},source:{exec:function(){this.toggleTextMode()},
txtExec:function(){this.toggleTextMode()},tooltip:"View source"}};c.sceditor.commandExists=function(d){return"undefined"!==typeof c.sceditor.commands[d]};c.sceditor.setCommand=function(d,b,a,f){if(!d||!b)return!1;c.sceditor.commandExists(d)||(c.sceditor.commands[d]={});c.sceditor.commands[d].exec=b;a&&(c.sceditor.commands[d].tooltip=a);f&&(c.sceditor.commands[d].keyPress=f);return!0};c.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|undo,redo|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|print,source",
style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:"en",emoticonsCompat:!1,emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",
":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",
":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,getHtmlHandler:null,getTextHandler:null,dateFormat:"year-month-day",toolbarContainer:null};c.fn.sceditor=function(d){return this.each(function(){new c.sceditor(this,
d)})}})(jQuery);(function(c){c.sceditorBBCodePlugin=function(d,b){var a=this,f,e,i,g;a.bbcodes=c.sceditorBBCodePlugin.bbcodes;var h={},j={};f=function(b,d){var e;c.each(j,function(f,g){if(!("a"===b.get(0).nodeName.toLowerCase()&&("color"===f||"text-decoration"===f))&&!("code"===b.get(0).nodeName.toLowerCase()&&"font-family"===f))e=b.css(f),b.parent().css(f)!==e&&c.each(g,function(f,g){if(null===g||-1<c.inArray(e.toString(),g))d=c.isFunction(a.bbcodes[f].format)?a.bbcodes[f].format.call(a,b,d):i(a.bbcodes[f].format,
d)})});return d};e=function(b,d){var e=b.get(0).nodeName.toLowerCase();if(b.hasClass("sceditor-ignore"))return d;"undefined"!==typeof h[e]&&c.each(h[e],function(e,f){if(null!==f){var g=!1;c.each(f,function(a,d){if(!("undefined"===typeof b.attr(a)||null!==d&&0>c.inArray(b.attr(a),d)))return g=!0,!1});if(!g)return}d=c.isFunction(a.bbcodes[e].format)?a.bbcodes[e].format.call(a,b,d):i(a.bbcodes[e].format,d)});if("br"===e||"div"===e||"p"===e)d+="\n";return d};i=function(){var a=arguments;return a[0].replace(/\{(\d+)\}/g,
function(c,b){return"undefined"!==typeof a[b-0+1]?a[b-0+1]:"{"+b+"}"})};a.stripQuotes=function(a){return a.replace(/^["']+/,"").replace(/["']+$/,"")};a.getHtmlHandler=function(b,d){return a.elementToBbcode(c(d))};a.elementToBbcode=function(b){var d="";if("undefined"===typeof b.get(0))return"";if("iframe"!==b.get(0).nodeName.toLowerCase()){if(3===b.get(0).nodeType)return b.get(0).nodeValue;b.is("code")?d=g(b):0<b.contents().length&&c.each(b.contents(),function(){d+=a.elementToBbcode(c(this))})}b.is("code")||
(d=f(b,d));return d=e(b,d)};g=function(a){var b="";if("undefined"===typeof a.get(0))return"";if(3===a.get(0).nodeType)return a.get(0).nodeValue;a.is("br")?b="\n":0<a.contents().length&&c.each(a.contents(),function(){b+=g(c(this))});return b};a.getTextHandler=function(b){for(var d=/\[([^\[\s=]*?)(?:([^\[]*?))?\]((?:[\s\S(?!=\[\\\1)](?!\[\1))*?)\[\/(\1)\]/g,e=/(\S+)=((?:(?:(["'])(?:\\\3|[^\3])*?\3))|(?:[^'"\s]+))/g,f,g=function(b,d,f,g){var h={};if("undefined"!==typeof f){var k,f=c.trim(f);if("="===
f.charAt(0)&&1>=f.split("=").length-1||"url"===d)h.defaultAttr=a.stripQuotes(f.substr(1));else for("="===f.charAt(0)&&(f="defaultAttr"+f);k=e.exec(f);)h[k[1].toLowerCase()]=a.stripQuotes(k[2])}return"undefined"===typeof a.bbcodes[d]?b:"function"===typeof a.bbcodes[d].html?a.bbcodes[d].html.call(a,d,h,g):i(a.bbcodes[d].html,g)},b=b.replace(/&/g,"&amp;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/\r/g,""),b=b.replace(/(\[\/?(?:left|center|right|justify)\])\n/g,"$1"),b=b.replace(/\n/g,
"<span><br /></span>");b!==f;)f=b,b=b.replace(d,g);b=b.replace(/\[hr\]/gi,"<hr>");return b.replace(/ {2}(?=([^<\>]*?<|[^<\>]*?$))/g," &nbsp;")};a.options=c.extend({},c.sceditor.defaultOptions,c.sceditorBBCodePlugin.defaultOptions,b);(function(){c.each(a.bbcodes,function(b){"undefined"!==typeof a.bbcodes[b].tags&&c.each(a.bbcodes[b].tags,function(a,c){h[a]=h[a]||{};h[a][b]=c});"undefined"!==typeof a.bbcodes[b].styles&&c.each(a.bbcodes[b].styles,function(a,c){j[a]=j[a]||{};j[a][b]=c})})})();new c.sceditor(d,
c.extend({},a.options,{getHtmlHandler:a.getHtmlHandler,getTextHandler:a.getTextHandler}))};c.sceditorBBCodePlugin.bbcodes={b:{styles:{"font-weight":"bold,bolder,401,700,800,900".split(",")},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},
format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},left:{styles:{"text-align":["left"]},format:"[left]{0}[/left]",html:'<div style="text-align: left">{0}</div>'},center:{styles:{"text-align":["center"]},format:"[center]{0}[/center]",html:'<div style="text-align: center">{0}</div>'},right:{styles:{"text-align":["right"]},format:"[right]{0}[/right]",html:'<div style="text-align: right">{0}</div>'},justify:{styles:{"text-align":["justify"]},
format:"[justify]{0}[/justify]",html:'<div style="text-align: justify">{0}</div>'},font:{styles:{"font-family":null},format:function(c,b){return c.css("font-family")===this.options.defaultFont?b:"[font="+this.stripQuotes(c.css("font-family"))+"]"+b+"[/font]"},html:function(c,b,a){return'<font face="'+b.defaultAttr+'">'+a+"</font>"}},size:{styles:{"font-size":null},format:function(c,b){var a=c.css("fontSize"),f=1;if(a===this.options.defaultSize)return b;-1<a.indexOf("px")?(a=a.replace("px","")-0,12<
a&&(f=2),15<a&&(f=3),17<a&&(f=4),23<a&&(f=5),31<a&&(f=6),47<a&&(f=7)):f=a;return"[size="+f+"]"+b+"[/size]"},html:function(c,b,a){return'<font size="'+b.defaultAttr+'">'+a+"</font>"}},color:{styles:{color:null},format:function(c,b){var a=function(a){function b(a){a=parseInt(a,10);if(isNaN(a))return"00";a=Math.max(0,Math.min(a,255)).toString(16);return 2>a.length?"0"+a:a}var c;return(c=a.match(/rgb\((\d+),\s*?(\d+),\s*?(\d+)\)/i))?"#"+b(c[1])+b(c[2]-0)+b(c[3]-0):a}(c.css("color"));return a===this.options.defaultColor?
b:"[color="+a+"]"+b+"[/color]"},html:function(c,b,a){return'<font color="'+b.defaultAttr+'">'+a+"</font>"}},ul:{tags:{ul:null},format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{html:"<ul>{0}</ul>"},ol:{tags:{ol:null},format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{html:"<li>{0}</li>"},table:{tags:{table:null},format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},
format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},format:"[td]{0}[/td]",html:'<td>{0}<br class="sceditor-ignore" /></td>'},emoticon:{tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(c,b){return c.attr("data-sceditor-emoticon")+b},html:"{0}"},horizontalrule:{tags:{hr:null},format:"[hr]{0}",html:"<hr />"},img:{tags:{img:{src:null}},format:function(d,b){return"undefined"!==typeof d.attr("data-sceditor-emoticon")?b:"[img"+("="+c(d).width()+"x"+c(d).height())+"]"+d.attr("src")+
"[/img]"},html:function(c,b,a){c="";"undefined"!==typeof b.width&&(c+=' width="'+b.width+'"');"undefined"!==typeof b.height&&(c+=' height="'+b.height+'"');"undefined"!==typeof b.defaultAttr&&(b=b.defaultAttr.split(/x/i),c=' width="'+b[0]+'" height="'+(2===b.length?b[1]:b[0])+'"');return"<img "+c+' src="'+a+'" />'}},url:{tags:{a:{href:null}},format:function(c,b){return"mailto:"===c.attr("href").substr(0,7)?"[email="+c.attr("href").substr(7)+"]"+b+"[/email]":"[url="+decodeURI(c.attr("href"))+"]"+b+
"[/url]"},html:function(c,b,a){if("undefined"===typeof b.defaultAttr||0===b.defaultAttr.length)b.defaultAttr=a;return'<a href="'+encodeURI(b.defaultAttr)+'">'+a+"</a>"}},email:{html:function(c,b,a){"undefined"===typeof b.defaultAttr&&(b.defaultAttr=a);return'<a href="mailto:'+b.defaultAttr+'">'+a+"</a>"}},quote:{tags:{blockquote:null},format:function(d,b){var a="",f=this;1===c(d).children("cite:first").length&&(a="="+c(d).children("cite:first").text(),b="",c(d).children("cite:first").remove(),c(d).contents().each(function(){b+=
f.elementToBbcode(c(this))}));return"[quote"+a+"]"+b+"[/quote]"},html:function(c,b,a){"undefined"!==typeof b.defaultAttr&&(a="<cite>"+b.defaultAttr+"</cite>"+a);return"<blockquote>"+a+"</blockquote>"}},code:{tags:{code:null},format:"[code]{0}[/code]",html:"<code>{0}</code>"},youtube:{tags:{iframe:{"data-youtube-id":null}},format:function(c,b){return!c.attr("data-youtube-id")?b:"[youtube]"+c.attr("data-youtube-id")+"[/youtube]"},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'}};
c.sceditorBBCodePlugin.commandExists=function(d){return"undefined"!==typeof c.sceditorBBCodePlugin.bbcodes[d]};c.sceditorBBCodePlugin.setCommand=function(d,b,a,f,e){if(!d||!f||!e)return!1;c.sceditorBBCodePlugin.commandExists(d)||(c.sceditorBBCodePlugin.bbcodes[d]={});c.sceditorBBCodePlugin.bbcodes[d].format=f;c.sceditorBBCodePlugin.bbcodes[d].html=e;b&&(c.sceditorBBCodePlugin.bbcodes[d].tags=b);a&&(c.sceditorBBCodePlugin.bbcodes[d].styles=a);return!0};c.sceditorBBCodePlugin.defaultOptions={defaultSize:13,
defaultColor:"#111111",defaultFont:"Verdana, Arial, Helvetica, sans-serif"};c.fn.sceditorBBCodePlugin=function(d){return this.each(function(){new c.sceditorBBCodePlugin(this,d)})}})(jQuery);
